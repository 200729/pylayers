<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Simulation Creation &mdash; PyLayers</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="PyLayers" href="../../index.html" />
    <link rel="up" title="User Manual" href="../index.html" />
    <link rel="next" title="Example of an UWB channel Ray Tracing simulation" href="DOC-RayTracing2.html" />
    <link rel="prev" title="RGPA (Robust Geometric Positioning Algorithm)" href="../7-location/DOC-RGPA.html" /> 
  </head>
  <body>
<div style="color: black;background-color: white; font-size: 3.2em; text-align: left; padding: 15px 10px 10px 15px">
    PyLayers
<!--
<a href="../../index.html"><img src="../../_static/logo.png" height="200" border="0"
    alt="pylayers"/></a>
-->
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="DOC-RayTracing2.html" title="Example of an UWB channel Ray Tracing simulation"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../7-location/DOC-RGPA.html" title="RGPA (Robust Geometric Positioning Algorithm)"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">PyLayers Home </a> |&nbsp;</li>
        <li><a href="../index.html">Documentation </a> |&nbsp;</li>
        <li><a href="../../download.html">Download </a> |&nbsp; </li>
        <li><a href="https://github.com/pylayers/">Developer (Github)</a> </li>

          <li><a href="../index.html" accesskey="U">User Manual</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Simulation Creation</a><ul>
<li><a class="reference internal" href="#adding-coordinates-of-transmiting-and-receiving-points">Adding coordinates of transmiting and receiving points</a></li>
<li><a class="reference internal" href="#signatures-rays-and-channel">Signatures, Rays and channel</a></li>
<li><a class="reference internal" href="#apply-waveform">Apply waveform</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../7-location/DOC-RGPA.html"
                        title="previous chapter">RGPA (Robust Geometric Positioning Algorithm)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="DOC-RayTracing2.html"
                        title="next chapter">Example of an UWB channel Ray Tracing simulation</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="simulation-creation">
<h1>Simulation Creation<a class="headerlink" href="#simulation-creation" title="Permalink to this headline">¶</a></h1>
<p>A ray-tracing simulation is controlled via a configuration file which is
stored in the <em>ini</em> directory of the project directory. By default,
there is a default configuration names <strong>default.ini</strong>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pylayers.simul.simulem</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.antprop.rays</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.antprop.channel</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.antprop.signature</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.measures.mesuwb</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">pylayers.util.pyutil</span> <span class="kn">as</span> <span class="nn">pyu</span>
<span class="kn">import</span> <span class="nn">pylayers.signal.bsignal</span> <span class="kn">as</span> <span class="nn">bs</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&lt;matplotlib.figure.Figure at 0x50e87d0&gt;</pre>
</div>
<p>A first step consists in loading a layout associated with the
simulation. Here the <tt class="docutils literal"><span class="pre">WHERE1.ini</span></tt> layout is chosen along with the
corresponding slabs and materials.</p>
<p>This layout corresponds to the office building where the first WHERE1
UWB measurement campaign has been conducted.</p>
<p>The layout method loads those in a member layout object <strong>L</strong> of the
simulation object <strong>S</strong>.</p>
<p>If not already available, the layout associated graphs are built.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">S</span> <span class="o">=</span> <span class="n">Simul</span><span class="p">()</span>
<span class="c"># loading a layout</span>
<span class="n">filestr</span> <span class="o">=</span> <span class="s">&#39;WHERE1&#39;</span>
<span class="n">S</span><span class="o">.</span><span class="n">layout</span><span class="p">(</span><span class="n">filestr</span><span class="o">+</span><span class="s">&#39;.ini&#39;</span><span class="p">,</span><span class="s">&#39;matDB.ini&#39;</span><span class="p">,</span><span class="s">&#39;slabDB.ini&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">dumpr</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">dumpw</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><pre>G s  not saved</pre>
</div>
<p>The layout display is fully parameterized via the embedded <strong>display</strong>
dictionnary member of the Layout object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">figsize</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;ednodes&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;nodes&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;WHERE1 Project Office Measurement Site&#39;</span>
<span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;overlay&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">showGs</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_6_0.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_6_0.png" />
<div class="section" id="adding-coordinates-of-transmiting-and-receiving-points">
<h2>Adding coordinates of transmiting and receiving points<a class="headerlink" href="#adding-coordinates-of-transmiting-and-receiving-points" title="Permalink to this headline">¶</a></h2>
<p>Coordinates of transmitters and receivers for the simulation to be
perform are stotred in <strong>.ini</strong> files. Transmitter and Receiver are
instances of the class RadioNode which offers different methods for
specifying nodes positions. The stucture of this <strong>.ini</strong> file presented
below. The node Id is associated with the 3 coordinates <img class="math" src="../../_images/math/a1ed2201b0110fcd83e4262119c177dd39364adf.png" alt="$x,y,z$"/>
separated by white spaces.</p>
<div class="highlight-python"><pre>[coordinates]
1 = -12.2724 7.76319999993 1.2
2 = -18.7747 15.1779999998 1.2
3 = -4.14179999998 8.86029999983 1.2
4 = -9.09139999998 15.1899000001 1.2</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="o">.</span><span class="n">tx</span> <span class="o">=</span> <span class="n">RadioNode</span><span class="p">(</span><span class="n">_fileini</span><span class="o">=</span><span class="s">&#39;w2m1rx.ini&#39;</span><span class="p">,</span><span class="n">_fileant</span><span class="o">=</span><span class="s">&#39;defant.vsh3&#39;</span><span class="p">)</span>
<span class="n">S</span><span class="o">.</span><span class="n">rx</span> <span class="o">=</span> <span class="n">RadioNode</span><span class="p">(</span><span class="n">_fileini</span><span class="o">=</span><span class="s">&#39;w2m1tx.ini&#39;</span><span class="p">,</span><span class="n">_fileant</span><span class="o">=</span><span class="s">&#39;defant.vsh3&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The whole simulation setup can then be displayed using the <strong>show</strong>
method of the Simulation object</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><pre>Warning : no furniture file loaded</pre>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_12_1.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_12_1.png" />
<p>Select Tx and Rx positions</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">map</span><span class="o">=</span><span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="mi">10</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
<span class="mi">20</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">26</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
<span class="mi">27</span><span class="p">:</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">31</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span>
      <span class="mi">37</span><span class="p">:</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">41</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">42</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">43</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">44</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">45</span><span class="p">:</span> <span class="mi">47</span><span class="p">,</span>
      <span class="mi">46</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">47</span><span class="p">:</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">48</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">49</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">50</span><span class="p">:</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">51</span><span class="p">:</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">52</span><span class="p">:</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">53</span><span class="p">:</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">54</span><span class="p">:</span> <span class="mi">56</span><span class="p">,</span>
      <span class="mi">55</span><span class="p">:</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">56</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">57</span><span class="p">:</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">58</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">59</span><span class="p">:</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">60</span><span class="p">:</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">61</span><span class="p">:</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">62</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">63</span><span class="p">:</span> <span class="mi">65</span><span class="p">,</span>
      <span class="mi">64</span><span class="p">:</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">65</span><span class="p">:</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">66</span><span class="p">:</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">67</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">68</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">69</span><span class="p">:</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">70</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">71</span><span class="p">:</span> <span class="mi">73</span><span class="p">,</span> <span class="mi">72</span><span class="p">:</span> <span class="mi">74</span><span class="p">,</span>
      <span class="mi">73</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">74</span><span class="p">:</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">75</span><span class="p">:</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">76</span><span class="p">:</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">77</span><span class="p">:</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">78</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">79</span><span class="p">:</span> <span class="mi">81</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">81</span><span class="p">:</span> <span class="mi">83</span><span class="p">,</span>
      <span class="mi">82</span><span class="p">:</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">83</span><span class="p">:</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">84</span><span class="p">:</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">85</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">86</span><span class="p">:</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">87</span><span class="p">:</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">88</span><span class="p">:</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">89</span><span class="p">:</span> <span class="mi">94</span><span class="p">,</span> <span class="mi">90</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span>
      <span class="mi">91</span><span class="p">:</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">92</span><span class="p">:</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">93</span><span class="p">:</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">94</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">95</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">96</span><span class="p">:</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">97</span><span class="p">:</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">98</span><span class="p">:</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">99</span><span class="p">:</span>
      <span class="mi">105</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span> <span class="mi">106</span><span class="p">,</span> <span class="mi">101</span><span class="p">:</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">102</span><span class="p">:</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">103</span><span class="p">:</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">104</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">105</span><span class="p">:</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">106</span><span class="p">:</span>
      <span class="mi">113</span><span class="p">,</span> <span class="mi">107</span><span class="p">:</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">108</span><span class="p">:</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">109</span><span class="p">:</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">110</span><span class="p">:</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">111</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">112</span><span class="p">:</span> <span class="mi">122</span><span class="p">,</span> <span class="mi">113</span><span class="p">:</span>
      <span class="mi">123</span><span class="p">,</span> <span class="mi">114</span><span class="p">:</span> <span class="mi">124</span><span class="p">,</span> <span class="mi">115</span><span class="p">:</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">116</span><span class="p">:</span> <span class="mi">126</span><span class="p">,</span> <span class="mi">117</span><span class="p">:</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">118</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">119</span><span class="p">:</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">120</span><span class="p">:</span>
      <span class="mi">133</span><span class="p">,</span> <span class="mi">121</span><span class="p">:</span> <span class="mi">134</span><span class="p">,</span> <span class="mi">122</span><span class="p">:</span> <span class="mi">136</span><span class="p">,</span> <span class="mi">123</span><span class="p">:</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">124</span><span class="p">:</span> <span class="mi">138</span><span class="p">,</span> <span class="mi">125</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">126</span><span class="p">:</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">127</span><span class="p">:</span>
      <span class="mi">141</span><span class="p">,</span> <span class="mi">128</span><span class="p">:</span> <span class="mi">142</span><span class="p">,</span> <span class="mi">129</span><span class="p">:</span> <span class="mi">143</span><span class="p">,</span> <span class="mi">130</span><span class="p">:</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">131</span><span class="p">:</span> <span class="mi">145</span><span class="p">,</span> <span class="mi">132</span><span class="p">:</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">133</span><span class="p">:</span> <span class="mi">147</span><span class="p">,</span> <span class="mi">134</span><span class="p">:</span>
      <span class="mi">162</span><span class="p">,</span> <span class="mi">135</span><span class="p">:</span> <span class="mi">163</span><span class="p">,</span> <span class="mi">136</span><span class="p">:</span> <span class="mi">164</span><span class="p">,</span> <span class="mi">137</span><span class="p">:</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">138</span><span class="p">:</span> <span class="mi">166</span><span class="p">,</span> <span class="mi">139</span><span class="p">:</span> <span class="mi">167</span><span class="p">,</span> <span class="mi">140</span><span class="p">:</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">141</span><span class="p">:</span>
      <span class="mi">169</span><span class="p">,</span> <span class="mi">142</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">143</span><span class="p">:</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">144</span><span class="p">:</span> <span class="mi">172</span><span class="p">,</span> <span class="mi">145</span><span class="p">:</span> <span class="mi">173</span><span class="p">,</span> <span class="mi">146</span><span class="p">:</span> <span class="mi">174</span><span class="p">,</span> <span class="mi">147</span><span class="p">:</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">148</span><span class="p">:</span>
      <span class="mi">176</span><span class="p">,</span> <span class="mi">149</span><span class="p">:</span> <span class="mi">177</span><span class="p">,</span> <span class="mi">150</span><span class="p">:</span> <span class="mi">179</span><span class="p">,</span> <span class="mi">151</span><span class="p">:</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">152</span><span class="p">:</span> <span class="mi">181</span><span class="p">,</span> <span class="mi">153</span><span class="p">:</span> <span class="mi">182</span><span class="p">,</span> <span class="mi">154</span><span class="p">:</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">155</span><span class="p">:</span>
      <span class="mi">184</span><span class="p">,</span> <span class="mi">156</span><span class="p">:</span> <span class="mi">185</span><span class="p">,</span> <span class="mi">157</span><span class="p">:</span> <span class="mi">186</span><span class="p">,</span> <span class="mi">158</span><span class="p">:</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">159</span><span class="p">:</span> <span class="mi">189</span><span class="p">,</span> <span class="mi">160</span><span class="p">:</span> <span class="mi">199</span><span class="p">,</span> <span class="mi">161</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">162</span><span class="p">:</span>
      <span class="mi">201</span><span class="p">,</span> <span class="mi">163</span><span class="p">:</span> <span class="mi">202</span><span class="p">,</span> <span class="mi">164</span><span class="p">:</span> <span class="mi">203</span><span class="p">,</span> <span class="mi">165</span><span class="p">:</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">166</span><span class="p">:</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">167</span><span class="p">:</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">168</span><span class="p">:</span> <span class="mi">207</span><span class="p">,</span> <span class="mi">169</span><span class="p">:</span>
      <span class="mi">208</span><span class="p">,</span> <span class="mi">170</span><span class="p">:</span> <span class="mi">209</span><span class="p">,</span> <span class="mi">171</span><span class="p">:</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">172</span><span class="p">:</span> <span class="mi">211</span><span class="p">,</span> <span class="mi">173</span><span class="p">:</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">174</span><span class="p">:</span> <span class="mi">213</span><span class="p">,</span> <span class="mi">175</span><span class="p">:</span> <span class="mi">214</span><span class="p">,</span> <span class="mi">176</span><span class="p">:</span>
      <span class="mi">215</span><span class="p">,</span> <span class="mi">177</span><span class="p">:</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">178</span><span class="p">:</span> <span class="mi">217</span><span class="p">,</span> <span class="mi">179</span><span class="p">:</span> <span class="mi">218</span><span class="p">,</span> <span class="mi">180</span><span class="p">:</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">181</span><span class="p">:</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">182</span><span class="p">:</span> <span class="mi">221</span><span class="p">,</span> <span class="mi">183</span><span class="p">:</span>
      <span class="mi">222</span><span class="p">,</span> <span class="mi">184</span><span class="p">:</span> <span class="mi">223</span><span class="p">,</span> <span class="mi">185</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span> <span class="mi">186</span><span class="p">:</span> <span class="mi">228</span><span class="p">,</span> <span class="mi">187</span><span class="p">:</span> <span class="mi">229</span><span class="p">,</span> <span class="mi">188</span><span class="p">:</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">189</span><span class="p">:</span> <span class="mi">231</span><span class="p">,</span> <span class="mi">190</span><span class="p">:</span>
      <span class="mi">232</span><span class="p">,</span> <span class="mi">191</span><span class="p">:</span> <span class="mi">233</span><span class="p">,</span> <span class="mi">192</span><span class="p">:</span> <span class="mi">234</span><span class="p">,</span> <span class="mi">193</span><span class="p">:</span> <span class="mi">235</span><span class="p">,</span> <span class="mi">194</span><span class="p">:</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">195</span><span class="p">:</span> <span class="mi">237</span><span class="p">,</span> <span class="mi">196</span><span class="p">:</span> <span class="mi">238</span><span class="p">,</span> <span class="mi">197</span><span class="p">:</span>
      <span class="mi">239</span><span class="p">,</span> <span class="mi">198</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">199</span><span class="p">:</span> <span class="mi">241</span><span class="p">,</span> <span class="mi">200</span><span class="p">:</span> <span class="mi">242</span><span class="p">,</span> <span class="mi">201</span><span class="p">:</span> <span class="mi">243</span><span class="p">,</span> <span class="mi">202</span><span class="p">:</span> <span class="mi">244</span><span class="p">,</span> <span class="mi">203</span><span class="p">:</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">204</span><span class="p">:</span>
      <span class="mi">246</span><span class="p">,</span> <span class="mi">205</span><span class="p">:</span> <span class="mi">247</span><span class="p">,</span> <span class="mi">206</span><span class="p">:</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">207</span><span class="p">:</span> <span class="mi">249</span><span class="p">,</span> <span class="mi">208</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">209</span><span class="p">:</span> <span class="mi">251</span><span class="p">,</span> <span class="mi">210</span><span class="p">:</span> <span class="mi">252</span><span class="p">,</span> <span class="mi">211</span><span class="p">:</span>
      <span class="mi">253</span><span class="p">,</span> <span class="mi">212</span><span class="p">:</span> <span class="mi">258</span><span class="p">,</span> <span class="mi">213</span><span class="p">:</span> <span class="mi">259</span><span class="p">,</span> <span class="mi">214</span><span class="p">:</span> <span class="mi">266</span><span class="p">,</span> <span class="mi">215</span><span class="p">:</span> <span class="mi">267</span><span class="p">,</span> <span class="mi">216</span><span class="p">:</span> <span class="mi">268</span><span class="p">,</span> <span class="mi">217</span><span class="p">:</span> <span class="mi">269</span><span class="p">,</span> <span class="mi">218</span><span class="p">:</span>
      <span class="mi">270</span><span class="p">,</span> <span class="mi">219</span><span class="p">:</span> <span class="mi">271</span><span class="p">,</span> <span class="mi">220</span><span class="p">:</span> <span class="mi">272</span><span class="p">,</span> <span class="mi">221</span><span class="p">:</span> <span class="mi">273</span><span class="p">,</span> <span class="mi">222</span><span class="p">:</span> <span class="mi">274</span><span class="p">,</span> <span class="mi">223</span><span class="p">:</span> <span class="mi">275</span><span class="p">,</span> <span class="mi">224</span><span class="p">:</span> <span class="mi">276</span><span class="p">,</span> <span class="mi">225</span><span class="p">:</span>
      <span class="mi">277</span><span class="p">,</span> <span class="mi">226</span><span class="p">:</span> <span class="mi">278</span><span class="p">,</span> <span class="mi">227</span><span class="p">:</span> <span class="mi">279</span><span class="p">,</span> <span class="mi">228</span><span class="p">:</span> <span class="mi">297</span><span class="p">,</span> <span class="mi">229</span><span class="p">:</span> <span class="mi">298</span><span class="p">,</span> <span class="mi">230</span><span class="p">:</span> <span class="mi">299</span><span class="p">,</span> <span class="mi">231</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">232</span><span class="p">:</span>
      <span class="mi">301</span><span class="p">,</span> <span class="mi">233</span><span class="p">:</span> <span class="mi">302</span><span class="p">,</span> <span class="mi">234</span><span class="p">:</span> <span class="mi">303</span><span class="p">,</span> <span class="mi">235</span><span class="p">:</span> <span class="mi">304</span><span class="p">,</span> <span class="mi">236</span><span class="p">:</span> <span class="mi">305</span><span class="p">,</span> <span class="mi">237</span><span class="p">:</span> <span class="mi">306</span><span class="p">,</span> <span class="mi">238</span><span class="p">:</span> <span class="mi">307</span><span class="p">,</span> <span class="mi">239</span><span class="p">:</span>
      <span class="mi">308</span><span class="p">,</span> <span class="mi">240</span><span class="p">:</span> <span class="mi">309</span><span class="p">,</span> <span class="mi">241</span><span class="p">:</span> <span class="mi">310</span><span class="p">,</span> <span class="mi">242</span><span class="p">:</span> <span class="mi">311</span><span class="p">,</span> <span class="mi">243</span><span class="p">:</span> <span class="mi">312</span><span class="p">,</span> <span class="mi">244</span><span class="p">:</span> <span class="mi">313</span><span class="p">,</span> <span class="mi">245</span><span class="p">:</span> <span class="mi">314</span><span class="p">,</span> <span class="mi">246</span><span class="p">:</span>
      <span class="mi">315</span><span class="p">,</span> <span class="mi">247</span><span class="p">:</span> <span class="mi">316</span><span class="p">,</span> <span class="mi">248</span><span class="p">:</span> <span class="mi">317</span><span class="p">,</span> <span class="mi">249</span><span class="p">:</span> <span class="mi">318</span><span class="p">,</span> <span class="mi">250</span><span class="p">:</span> <span class="mi">319</span><span class="p">,</span> <span class="mi">251</span><span class="p">:</span> <span class="mi">320</span><span class="p">,</span> <span class="mi">252</span><span class="p">:</span> <span class="mi">321</span><span class="p">,</span> <span class="mi">253</span><span class="p">:</span>
      <span class="mi">322</span><span class="p">,</span> <span class="mi">254</span><span class="p">:</span> <span class="mi">323</span><span class="p">,</span> <span class="mi">255</span><span class="p">:</span> <span class="mi">324</span><span class="p">,</span> <span class="mi">256</span><span class="p">:</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">257</span><span class="p">:</span> <span class="mi">326</span><span class="p">,</span> <span class="mi">258</span><span class="p">:</span> <span class="mi">327</span><span class="p">,</span> <span class="mi">259</span><span class="p">:</span> <span class="mi">328</span><span class="p">,</span> <span class="mi">260</span><span class="p">:</span>
      <span class="mi">329</span><span class="p">,</span> <span class="mi">261</span><span class="p">:</span> <span class="mi">330</span><span class="p">,</span> <span class="mi">262</span><span class="p">:</span> <span class="mi">332</span><span class="p">,</span> <span class="mi">263</span><span class="p">:</span> <span class="mi">333</span><span class="p">,</span> <span class="mi">264</span><span class="p">:</span> <span class="mi">334</span><span class="p">,</span> <span class="mi">265</span><span class="p">:</span> <span class="mi">335</span><span class="p">,</span> <span class="mi">266</span><span class="p">:</span> <span class="mi">336</span><span class="p">,</span> <span class="mi">267</span><span class="p">:</span>
      <span class="mi">337</span><span class="p">,</span> <span class="mi">268</span><span class="p">:</span> <span class="mi">338</span><span class="p">,</span> <span class="mi">269</span><span class="p">:</span> <span class="mi">339</span><span class="p">,</span> <span class="mi">270</span><span class="p">:</span> <span class="mi">340</span><span class="p">,</span> <span class="mi">271</span><span class="p">:</span> <span class="mi">341</span><span class="p">,</span> <span class="mi">272</span><span class="p">:</span> <span class="mi">342</span><span class="p">,</span> <span class="mi">273</span><span class="p">:</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">274</span><span class="p">:</span>
      <span class="mi">344</span><span class="p">,</span> <span class="mi">275</span><span class="p">:</span> <span class="mi">345</span><span class="p">,</span> <span class="mi">276</span><span class="p">:</span> <span class="mi">346</span><span class="p">,</span> <span class="mi">277</span><span class="p">:</span> <span class="mi">347</span><span class="p">,</span> <span class="mi">278</span><span class="p">:</span> <span class="mi">348</span><span class="p">,</span> <span class="mi">279</span><span class="p">:</span> <span class="mi">349</span><span class="p">,</span> <span class="mi">280</span><span class="p">:</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">281</span><span class="p">:</span>
      <span class="mi">351</span><span class="p">,</span> <span class="mi">282</span><span class="p">:</span> <span class="mi">352</span><span class="p">,</span> <span class="mi">283</span><span class="p">:</span> <span class="mi">353</span><span class="p">,</span> <span class="mi">284</span><span class="p">:</span> <span class="mi">354</span><span class="p">,</span> <span class="mi">285</span><span class="p">:</span> <span class="mi">355</span><span class="p">,</span> <span class="mi">286</span><span class="p">:</span> <span class="mi">356</span><span class="p">,</span> <span class="mi">287</span><span class="p">:</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">288</span><span class="p">:</span>
      <span class="mi">361</span><span class="p">,</span> <span class="mi">289</span><span class="p">:</span> <span class="mi">362</span><span class="p">,</span> <span class="mi">290</span><span class="p">:</span> <span class="mi">363</span><span class="p">,</span> <span class="mi">291</span><span class="p">:</span> <span class="mi">364</span><span class="p">,</span> <span class="mi">292</span><span class="p">:</span> <span class="mi">365</span><span class="p">,</span> <span class="mi">293</span><span class="p">:</span> <span class="mi">366</span><span class="p">,</span> <span class="mi">294</span><span class="p">:</span> <span class="mi">367</span><span class="p">,</span> <span class="mi">295</span><span class="p">:</span>
      <span class="mi">368</span><span class="p">,</span> <span class="mi">296</span><span class="p">:</span> <span class="mi">369</span><span class="p">,</span> <span class="mi">297</span><span class="p">:</span> <span class="mi">370</span><span class="p">,</span> <span class="mi">298</span><span class="p">:</span> <span class="mi">371</span><span class="p">,</span> <span class="mi">299</span><span class="p">:</span> <span class="mi">372</span><span class="p">,</span> <span class="mi">300</span><span class="p">:</span> <span class="mi">373</span><span class="p">,</span> <span class="mi">301</span><span class="p">:</span> <span class="mi">374</span><span class="p">,</span> <span class="mi">302</span><span class="p">:</span>
      <span class="mi">375</span><span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="s">&#39;number of Tx :&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="k">print</span> <span class="s">&#39;number of rx :&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python"><pre>number of Tx : 302
number of rx : 4</pre>
</div>
<p>Choose measurement points</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Chose used points here</span>

<span class="n">itx</span><span class="o">=</span><span class="mi">10</span>
<span class="n">irx</span><span class="o">=</span><span class="mi">2</span>


<span class="c"># check points</span>
<span class="n">tx</span><span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">itx</span><span class="p">]</span>
<span class="n">rx</span><span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="n">irx</span><span class="p">]</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">UWBMesure</span><span class="p">(</span><span class="nb">map</span><span class="p">[</span><span class="n">itx</span><span class="p">])</span>
<span class="n">txm</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">tx</span>
<span class="n">rxm</span> <span class="o">=</span> <span class="n">M</span><span class="o">.</span><span class="n">rx</span><span class="p">[</span><span class="n">irx</span><span class="p">]</span>
<span class="k">print</span> <span class="n">tx</span><span class="p">,</span><span class="n">txm</span>
<span class="k">print</span> <span class="n">rx</span><span class="p">,</span><span class="n">rxm</span>

<span class="k">if</span> <span class="p">(</span><span class="n">tx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">txm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">tx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">txm</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Tx and Txm Are not the same !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&#39;</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Txs OK&#39;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">rxm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">rx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rxm</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Rx and Rxm Are not the same !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&#39;</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="k">print</span> <span class="s">&#39;Rxs OK&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><pre>[-24.867   12.3097   1.2   ] [-24.867   12.3097   1.2   ]
[-18.7747  15.178    1.2   ] [-18.7747  15.178    1.2   ]
Txs OK
Rxs OK</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fig</span> <span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_18_0.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_18_0.png" />
<div class="highlight-python"><div class="highlight"><pre><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">tx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">M</span><span class="o">.</span><span class="n">tx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">&#39;or&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;tx&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">rx</span><span class="p">[</span><span class="n">irx</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">M</span><span class="o">.</span><span class="n">rx</span><span class="p">[</span><span class="n">irx</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="s">&#39;ob&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;rx&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><pre>&lt;matplotlib.legend.Legend at 0x7725190&gt;</pre>
</div>
</div>
<div class="section" id="signatures-rays-and-channel">
<h2>Signatures, Rays and channel<a class="headerlink" href="#signatures-rays-and-channel" title="Permalink to this headline">¶</a></h2>
<p>A signature is a sequence of layout objects (points and segments) which
are involved in a given optical ray joinint the transmiter and the
receiver. The signatutre is calculated from a layout cycle to an other
layout cycle. This means that is is required first to retrieve the cycle
number from point coordinates. This is done thanks to the <strong>pt2cy</strong>,
point to cycle function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ctx</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">pt2cy</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
<span class="n">crx</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="o">.</span><span class="n">pt2cy</span><span class="p">(</span><span class="n">rx</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;tx point belongs to cycle &#39;</span><span class="p">,</span><span class="n">ctx</span>
<span class="k">print</span> <span class="s">&#39;rx point belongs to cycle &#39;</span><span class="p">,</span><span class="n">crx</span>
</pre></div>
</div>
<div class="highlight-python"><pre>tx point belongs to cycle  5
rx point belongs to cycle  4</pre>
</div>
<p>Then the signature between cycle 5 and cycle 4 can be calculated. This
is done by instantiating a Signature object with a given layout and the
2 cycle number.</p>
<p>The representaion of a signature obje</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Si</span> <span class="o">=</span> <span class="n">Signatures</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="p">,</span><span class="n">ctx</span><span class="p">,</span><span class="n">crx</span><span class="p">)</span>
<span class="n">Si</span><span class="o">.</span><span class="n">run1</span><span class="p">(</span><span class="n">cutoff</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Si</span>
</pre></div>
</div>
<div class="highlight-python"><pre>Signatures
----------
from cycle : 5 to cycle 4
1 : 1
   [12]
   [2]
2 : 20
   [ 12  12  12  12  12  12  12  12  12  13 331 331 329   5   4 156  15  13
 330   2]
   [2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1]
   [ 29  30  11 342 333  22  23 335 334 342  16 342  12  12  12  12  12  12
  12  12]
   [1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2]
3 : 132
   [140  12  12  12  12  12  12  12  12  12  12  12  12  12  12  12  12  12
  12  12  12  12  12  12  12  12  12  13  13  13  13  13  13  13  13  13
 331 331 331 331 331 331 331 331 331 331 331 331 331 331 329 329 329 329
 329 329 329 329 329   5   5   5   5   5   5   5   5   5   5   5   5   5
   5   5   4   4   4   4   4   4   4   4   4   4   4 156 156 156 156 156
 156 156 156 156 156 156 156  15  15  15  15  15  15  15  15  15  15  15
  13  13  13 331 331 330 330 330 330 330 330 330   2   2   2   2   2   2
   2   2   2   2   2   2]
   [2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1]
   [135  30 333 333 335  11 335  11 335 342  30 335 335  30 335 342  30  11
 335  29  22  23  30  29  23  30  29   8   8 331 342 342 342 342 342 342
   8 332   8 332  13  16 342 342 342 342 342 342 342 342 156  15  12  12
  12  12  12  12  12 156  15 329  13 330   4 331 331  12  12  12  12  12
  12  12   5 330  13 331 331  12  12  12  12  12  12  15   5 330  13 331
 331  12  12  12  12  12  12   5 330  13 331 331  12  12  12  12  12  12
   2 331 331   2  13   2 331 331  12  12  12  12 156  15  13 330 331 331
  12  12  12  12  12  12]
   [2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 1
 1 1 1 1 1 2 2 2 2 2 2 2 2 1 1 2 2 2 2 2 2 2 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2
 1 1 1 2 2 2 2 2 2 2 2 1 1 1 1 2 2 2 2 2 2 2 2 1 1 1 2 2 2 2 2 2 2 2 1 2 2
 1 1 1 2 2 2 2 2 2 1 1 1 1 2 2 2 2 2 2 2 2]
   [334  29  29  30  11  16  16 342 342 333  22  22 328  24  24  23  23  23
  23  23  23 335 335 335 334 334 334  16 342 342  11  16 333  23 335 334
  16  16 342 342 342 342  29  30  11  16 333  23 335 334  12  12  29  30
 333  22  23 335 334  12  12  12  12  12  12  16 342  29  30 333  22  23
 335 334  12  12  12  16 342  29 333  22  23 335 334  12  12  12  12  16
 342  29 333  22  23 335 334  12  12  12  16 342  29 333  22  23 335 334
  12  16 342  12  12  12  16 342  29  30 335 334  12  12  12  12  16 342
  29  30  22  23 335 334]
   [2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 1 2
 2 2 2 2 2 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1
 2 2 2 2 2 1 1 1 1 1 1 2 2 2 2 2 2 1 1 1 1 1 1 2 2 2 2 2 1 1 1 1 1 1 2 2 2
 2 2 2 2 2 1 1 1 1 2 2 2 2 2 2 1 1 1 1 1 1]</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r2d</span> <span class="o">=</span> <span class="n">Si</span><span class="o">.</span><span class="n">rays</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span><span class="n">rx</span><span class="p">)</span>
<span class="n">r3d</span><span class="o">=</span><span class="n">r2d</span><span class="o">.</span><span class="n">to3D</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="n">r3d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r2d</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><pre>(&lt;matplotlib.figure.Figure at 0x7d1cc90&gt;,
 &lt;matplotlib.axes.AxesSubplot at 0x7d29390&gt;)</pre>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_26_1.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_26_1.png" />
<div class="highlight-python"><div class="highlight"><pre><span class="n">r3d</span><span class="o">.</span><span class="n">locbas</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="n">r3d</span><span class="o">.</span><span class="n">fillinter</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
<span class="n">r3d</span>
</pre></div>
</div>
<div class="highlight-python"><pre>Rays3D
----------
1 / 1 : [0]
2 / 5 : [1 2 3 4 5]
3 / 13 : [ 6  7  8  9 10 11 12 13 14 15 16 17 18]
4 / 16 : [19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34]
5 / 10 : [35 36 37 38 39 40 41 42 43 44]
-----
ni : 164
nl : 373</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="o">.</span><span class="n">freq</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">array</span><span class="p">([</span>  <span class="mf">2.</span>  <span class="p">,</span>   <span class="mf">2.05</span><span class="p">,</span>   <span class="mf">2.1</span> <span class="p">,</span>   <span class="mf">2.15</span><span class="p">,</span>   <span class="mf">2.2</span> <span class="p">,</span>   <span class="mf">2.25</span><span class="p">,</span>   <span class="mf">2.3</span> <span class="p">,</span>   <span class="mf">2.35</span><span class="p">,</span>
         <span class="mf">2.4</span> <span class="p">,</span>   <span class="mf">2.45</span><span class="p">,</span>   <span class="mf">2.5</span> <span class="p">,</span>   <span class="mf">2.55</span><span class="p">,</span>   <span class="mf">2.6</span> <span class="p">,</span>   <span class="mf">2.65</span><span class="p">,</span>   <span class="mf">2.7</span> <span class="p">,</span>   <span class="mf">2.75</span><span class="p">,</span>
         <span class="mf">2.8</span> <span class="p">,</span>   <span class="mf">2.85</span><span class="p">,</span>   <span class="mf">2.9</span> <span class="p">,</span>   <span class="mf">2.95</span><span class="p">,</span>   <span class="mf">3.</span>  <span class="p">,</span>   <span class="mf">3.05</span><span class="p">,</span>   <span class="mf">3.1</span> <span class="p">,</span>   <span class="mf">3.15</span><span class="p">,</span>
         <span class="mf">3.2</span> <span class="p">,</span>   <span class="mf">3.25</span><span class="p">,</span>   <span class="mf">3.3</span> <span class="p">,</span>   <span class="mf">3.35</span><span class="p">,</span>   <span class="mf">3.4</span> <span class="p">,</span>   <span class="mf">3.45</span><span class="p">,</span>   <span class="mf">3.5</span> <span class="p">,</span>   <span class="mf">3.55</span><span class="p">,</span>
         <span class="mf">3.6</span> <span class="p">,</span>   <span class="mf">3.65</span><span class="p">,</span>   <span class="mf">3.7</span> <span class="p">,</span>   <span class="mf">3.75</span><span class="p">,</span>   <span class="mf">3.8</span> <span class="p">,</span>   <span class="mf">3.85</span><span class="p">,</span>   <span class="mf">3.9</span> <span class="p">,</span>   <span class="mf">3.95</span><span class="p">,</span>
         <span class="mf">4.</span>  <span class="p">,</span>   <span class="mf">4.05</span><span class="p">,</span>   <span class="mf">4.1</span> <span class="p">,</span>   <span class="mf">4.15</span><span class="p">,</span>   <span class="mf">4.2</span> <span class="p">,</span>   <span class="mf">4.25</span><span class="p">,</span>   <span class="mf">4.3</span> <span class="p">,</span>   <span class="mf">4.35</span><span class="p">,</span>
         <span class="mf">4.4</span> <span class="p">,</span>   <span class="mf">4.45</span><span class="p">,</span>   <span class="mf">4.5</span> <span class="p">,</span>   <span class="mf">4.55</span><span class="p">,</span>   <span class="mf">4.6</span> <span class="p">,</span>   <span class="mf">4.65</span><span class="p">,</span>   <span class="mf">4.7</span> <span class="p">,</span>   <span class="mf">4.75</span><span class="p">,</span>
         <span class="mf">4.8</span> <span class="p">,</span>   <span class="mf">4.85</span><span class="p">,</span>   <span class="mf">4.9</span> <span class="p">,</span>   <span class="mf">4.95</span><span class="p">,</span>   <span class="mf">5.</span>  <span class="p">,</span>   <span class="mf">5.05</span><span class="p">,</span>   <span class="mf">5.1</span> <span class="p">,</span>   <span class="mf">5.15</span><span class="p">,</span>
         <span class="mf">5.2</span> <span class="p">,</span>   <span class="mf">5.25</span><span class="p">,</span>   <span class="mf">5.3</span> <span class="p">,</span>   <span class="mf">5.35</span><span class="p">,</span>   <span class="mf">5.4</span> <span class="p">,</span>   <span class="mf">5.45</span><span class="p">,</span>   <span class="mf">5.5</span> <span class="p">,</span>   <span class="mf">5.55</span><span class="p">,</span>
         <span class="mf">5.6</span> <span class="p">,</span>   <span class="mf">5.65</span><span class="p">,</span>   <span class="mf">5.7</span> <span class="p">,</span>   <span class="mf">5.75</span><span class="p">,</span>   <span class="mf">5.8</span> <span class="p">,</span>   <span class="mf">5.85</span><span class="p">,</span>   <span class="mf">5.9</span> <span class="p">,</span>   <span class="mf">5.95</span><span class="p">,</span>
         <span class="mf">6.</span>  <span class="p">,</span>   <span class="mf">6.05</span><span class="p">,</span>   <span class="mf">6.1</span> <span class="p">,</span>   <span class="mf">6.15</span><span class="p">,</span>   <span class="mf">6.2</span> <span class="p">,</span>   <span class="mf">6.25</span><span class="p">,</span>   <span class="mf">6.3</span> <span class="p">,</span>   <span class="mf">6.35</span><span class="p">,</span>
         <span class="mf">6.4</span> <span class="p">,</span>   <span class="mf">6.45</span><span class="p">,</span>   <span class="mf">6.5</span> <span class="p">,</span>   <span class="mf">6.55</span><span class="p">,</span>   <span class="mf">6.6</span> <span class="p">,</span>   <span class="mf">6.65</span><span class="p">,</span>   <span class="mf">6.7</span> <span class="p">,</span>   <span class="mf">6.75</span><span class="p">,</span>
         <span class="mf">6.8</span> <span class="p">,</span>   <span class="mf">6.85</span><span class="p">,</span>   <span class="mf">6.9</span> <span class="p">,</span>   <span class="mf">6.95</span><span class="p">,</span>   <span class="mf">7.</span>  <span class="p">,</span>   <span class="mf">7.05</span><span class="p">,</span>   <span class="mf">7.1</span> <span class="p">,</span>   <span class="mf">7.15</span><span class="p">,</span>
         <span class="mf">7.2</span> <span class="p">,</span>   <span class="mf">7.25</span><span class="p">,</span>   <span class="mf">7.3</span> <span class="p">,</span>   <span class="mf">7.35</span><span class="p">,</span>   <span class="mf">7.4</span> <span class="p">,</span>   <span class="mf">7.45</span><span class="p">,</span>   <span class="mf">7.5</span> <span class="p">,</span>   <span class="mf">7.55</span><span class="p">,</span>
         <span class="mf">7.6</span> <span class="p">,</span>   <span class="mf">7.65</span><span class="p">,</span>   <span class="mf">7.7</span> <span class="p">,</span>   <span class="mf">7.75</span><span class="p">,</span>   <span class="mf">7.8</span> <span class="p">,</span>   <span class="mf">7.85</span><span class="p">,</span>   <span class="mf">7.9</span> <span class="p">,</span>   <span class="mf">7.95</span><span class="p">,</span>
         <span class="mf">8.</span>  <span class="p">,</span>   <span class="mf">8.05</span><span class="p">,</span>   <span class="mf">8.1</span> <span class="p">,</span>   <span class="mf">8.15</span><span class="p">,</span>   <span class="mf">8.2</span> <span class="p">,</span>   <span class="mf">8.25</span><span class="p">,</span>   <span class="mf">8.3</span> <span class="p">,</span>   <span class="mf">8.35</span><span class="p">,</span>
         <span class="mf">8.4</span> <span class="p">,</span>   <span class="mf">8.45</span><span class="p">,</span>   <span class="mf">8.5</span> <span class="p">,</span>   <span class="mf">8.55</span><span class="p">,</span>   <span class="mf">8.6</span> <span class="p">,</span>   <span class="mf">8.65</span><span class="p">,</span>   <span class="mf">8.7</span> <span class="p">,</span>   <span class="mf">8.75</span><span class="p">,</span>
         <span class="mf">8.8</span> <span class="p">,</span>   <span class="mf">8.85</span><span class="p">,</span>   <span class="mf">8.9</span> <span class="p">,</span>   <span class="mf">8.95</span><span class="p">,</span>   <span class="mf">9.</span>  <span class="p">,</span>   <span class="mf">9.05</span><span class="p">,</span>   <span class="mf">9.1</span> <span class="p">,</span>   <span class="mf">9.15</span><span class="p">,</span>
         <span class="mf">9.2</span> <span class="p">,</span>   <span class="mf">9.25</span><span class="p">,</span>   <span class="mf">9.3</span> <span class="p">,</span>   <span class="mf">9.35</span><span class="p">,</span>   <span class="mf">9.4</span> <span class="p">,</span>   <span class="mf">9.45</span><span class="p">,</span>   <span class="mf">9.5</span> <span class="p">,</span>   <span class="mf">9.55</span><span class="p">,</span>
         <span class="mf">9.6</span> <span class="p">,</span>   <span class="mf">9.65</span><span class="p">,</span>   <span class="mf">9.7</span> <span class="p">,</span>   <span class="mf">9.75</span><span class="p">,</span>   <span class="mf">9.8</span> <span class="p">,</span>   <span class="mf">9.85</span><span class="p">,</span>   <span class="mf">9.9</span> <span class="p">,</span>   <span class="mf">9.95</span><span class="p">,</span>
        <span class="mf">10.</span>  <span class="p">,</span>  <span class="mf">10.05</span><span class="p">,</span>  <span class="mf">10.1</span> <span class="p">,</span>  <span class="mf">10.15</span><span class="p">,</span>  <span class="mf">10.2</span> <span class="p">,</span>  <span class="mf">10.25</span><span class="p">,</span>  <span class="mf">10.3</span> <span class="p">,</span>  <span class="mf">10.35</span><span class="p">,</span>
        <span class="mf">10.4</span> <span class="p">,</span>  <span class="mf">10.45</span><span class="p">,</span>  <span class="mf">10.5</span> <span class="p">,</span>  <span class="mf">10.55</span><span class="p">,</span>  <span class="mf">10.6</span> <span class="p">,</span>  <span class="mf">10.65</span><span class="p">,</span>  <span class="mf">10.7</span> <span class="p">,</span>  <span class="mf">10.75</span><span class="p">,</span>
        <span class="mf">10.8</span> <span class="p">,</span>  <span class="mf">10.85</span><span class="p">,</span>  <span class="mf">10.9</span> <span class="p">,</span>  <span class="mf">10.95</span><span class="p">,</span>  <span class="mf">11.</span>  <span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Ct</span> <span class="o">=</span> <span class="n">r3d</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">freq</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-python"><pre>Rays evaluation</pre>
</div>
</div>
<div class="section" id="apply-waveform">
<h2>Apply waveform<a class="headerlink" href="#apply-waveform" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Ct</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">freq</span>
<span class="n">sco</span><span class="o">=</span><span class="n">Ct</span><span class="o">.</span><span class="n">prop2tran</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s">&#39;theta&#39;</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="s">&#39;theta&#39;</span><span class="p">)</span>
<span class="n">sca</span><span class="o">=</span> <span class="n">Ct</span><span class="o">.</span><span class="n">prop2tran</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">tx</span><span class="o">.</span><span class="n">A</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">rx</span><span class="o">.</span><span class="n">A</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wav</span> <span class="o">=</span> <span class="n">wvf</span><span class="o">.</span><span class="n">Waveform</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s">&#39;W1compensate&#39;</span><span class="p">)</span>
<span class="c">#wav = wvf.Waveform({&#39;type&#39; : &#39;generic&#39;,&#39;band&#39;: 0.499,&#39;fc&#39;: 4.493, &#39;fe&#39;: 100, &#39;thresh&#39;: 3, &#39;tw&#39;: 30})</span>
<span class="n">wav</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_32_0.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_32_0.png" />
<div class="highlight-python"><div class="highlight"><pre><span class="n">ciro</span> <span class="o">=</span> <span class="n">sco</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sfg</span><span class="p">)</span>
<span class="n">cira</span> <span class="o">=</span> <span class="n">sca</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sfg</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#ciro.plot()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#cira.plot()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#dchan={i:&#39;ch&#39;+str(i) for i in range(1,5)}</span>
<span class="n">dchan</span><span class="o">=</span><span class="p">{}</span>
<span class="n">dchan</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;ch3&#39;</span>
<span class="n">dchan</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;ch4&#39;</span>
<span class="n">dchan</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;ch1&#39;</span>
<span class="n">dchan</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;ch2&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">311</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;Measurements&quot;</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">=</span><span class="s">&#39;M.tdd.&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">dchan</span><span class="p">[</span><span class="n">irx</span><span class="p">])</span> <span class="o">+</span> <span class="s">&#39;.plot()&#39;</span>
<span class="nb">eval</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="c">#M.tdd.ch2.plot()</span>
<span class="c"># align for plotting</span>
<span class="c">#ciro.x=ciro.x-ciro.x[0]</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">312</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;Simulation-with antenna&quot;</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">cira</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="c">#ax3 = fig.add_subplot(313,title=&quot;Simulation-without antenna&quot;,sharex=ax1, sharey=ax1)</span>
<span class="c">#ciro.plot()</span>
</pre></div>
</div>
<div class="highlight-python"><pre>/usr/local/lib/python2.7/dist-packages/matplotlib-1.2.1-py2.7-linux-x86_64.egg/matplotlib/axes.py:4601: UserWarning: No labeled objects found. Use label='...' kwarg on individual plots.
  warnings.warn("No labeled objects found. "</pre>
</div>
<div class="highlight-python"><pre>(&lt;matplotlib.figure.Figure at 0x911ac90&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x7f16205f76d0&gt;]], dtype=object))</pre>
</div>
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_2.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_2.png" />
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_3.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_3.png" />
<img alt="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_4.png" src="./DEV-RayTracingW1_files/DEV-RayTracingW1_37_4.png" />
<div class="highlight-python"><div class="highlight"><pre><span class="n">v</span> <span class="o">=</span> <span class="n">tx</span><span class="o">-</span><span class="n">rx</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>

<span class="k">print</span> <span class="s">&#39;real delay between tx and rx&#39;</span><span class="p">,</span><span class="n">d</span><span class="o">/</span><span class="mf">0.3</span>
<span class="k">print</span> <span class="s">&#39;simulated first path delay&#39;</span><span class="p">,</span><span class="n">r3d</span><span class="o">.</span><span class="n">delays</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><pre>real delay between tx and rx 22.4458024233
simulated first path delay 22.4458024233</pre>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r3d</span><span class="o">.</span><span class="n">delays</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">array</span><span class="p">([</span> <span class="mf">22.44580242</span><span class="p">,</span>  <span class="mf">25.45219139</span><span class="p">,</span>  <span class="mf">23.82884904</span><span class="p">,</span>  <span class="mf">25.85504021</span><span class="p">,</span>
        <span class="mf">51.78090935</span><span class="p">,</span>  <span class="mf">42.94395007</span><span class="p">,</span>  <span class="mf">30.06350024</span><span class="p">,</span>  <span class="mf">30.06350024</span><span class="p">,</span>
        <span class="mf">28.50408925</span><span class="p">,</span>  <span class="mf">53.15319909</span><span class="p">,</span>  <span class="mf">44.58904404</span><span class="p">,</span>  <span class="mf">27.06442507</span><span class="p">,</span>
        <span class="mf">52.39525334</span><span class="p">,</span>  <span class="mf">43.68275229</span><span class="p">,</span>  <span class="mf">53.34576334</span><span class="p">,</span>  <span class="mf">52.82600387</span><span class="p">,</span>
        <span class="mf">44.82017265</span><span class="p">,</span>  <span class="mf">73.04196874</span><span class="p">,</span>  <span class="mf">45.77442092</span><span class="p">,</span>  <span class="mf">32.68765981</span><span class="p">,</span>
        <span class="mf">55.50912153</span><span class="p">,</span>  <span class="mf">47.37280705</span><span class="p">,</span>  <span class="mf">32.68765981</span><span class="p">,</span>  <span class="mf">55.50912153</span><span class="p">,</span>
        <span class="mf">47.37280705</span><span class="p">,</span>  <span class="mf">54.67879357</span><span class="p">,</span>  <span class="mf">54.17182556</span><span class="p">,</span>  <span class="mf">46.39879175</span><span class="p">,</span>
        <span class="mf">74.0211402</span> <span class="p">,</span>  <span class="mf">47.32121734</span><span class="p">,</span>  <span class="mf">53.94228829</span><span class="p">,</span>  <span class="mf">53.42833223</span><span class="p">,</span>
        <span class="mf">45.52853914</span><span class="p">,</span>  <span class="mf">73.47876698</span><span class="p">,</span>  <span class="mf">46.46824303</span><span class="p">,</span>  <span class="mf">56.97166372</span><span class="p">,</span>
        <span class="mf">56.48527848</span><span class="p">,</span>  <span class="mf">49.08001504</span><span class="p">,</span>  <span class="mf">75.73063579</span><span class="p">,</span>  <span class="mf">49.95295397</span><span class="p">,</span>
        <span class="mf">56.97166372</span><span class="p">,</span>  <span class="mf">56.48527848</span><span class="p">,</span>  <span class="mf">49.08001504</span><span class="p">,</span>  <span class="mf">75.73063579</span><span class="p">,</span>  <span class="mf">49.95295397</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r3d</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><pre>-------------------------
Informations of ray # 0
-------------------------

Index , type, slab      , th(rad), alpha     , gamma2
    0 , B0  , -         , -      , -         , -
    0 , T   , PARTITION ,    0.43,  (0.35+0j),  (0.88+0j)
    0 , B   , -         , -      , -         , -

----------------------------------------
 Matrix of ray # 0 at f= 2.0
----------------------------------------
rotation matrix# type: B0
[[  1.00000000e+00   0.00000000e+00]
 [ -3.08148791e-33  -1.00000000e+00]]
interaction # 0 type: T
[[ 0.29786294+0.47272302j  0.00000000+0.j        ]
 [ 0.00000000+0.j          0.34487956+0.50450197j]]
rotation matrix# [0] type: B
[[ 1.  0.]
 [ 0. -1.]]</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="DOC-RayTracing2.html" title="Example of an UWB channel Ray Tracing simulation"
             >next</a></li>
        <li class="right" >
          <a href="../7-location/DOC-RGPA.html" title="RGPA (Robust Geometric Positioning Algorithm)"
             >previous</a> |</li>
        <li><a href="../../index.html">PyLayers Home </a> |&nbsp;</li>
        <li><a href="../index.html">Documentation </a> |&nbsp;</li>
        <li><a href="../../download.html">Download </a> |&nbsp; </li>
        <li><a href="https://github.com/pylayers/">Developer (Github)</a> </li>

          <li><a href="../index.html" >User Manual</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013, PyLayers developer team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34943220-1']);
  _gaq.push(['_setDomainName', 'pylayers.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })(); 
</script> 
 
  </body>
</html>