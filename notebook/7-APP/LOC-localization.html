
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example of TDOA &mdash; Python 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="Python 1 documentation" href="../../index.html" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34943220-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body role="document">

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img src="../../_static/pylayers.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="../../download.html">Download</a></li>
            <li><a href="../TOC.html">User Guide</a></li>
            <li><a href="../../modules/pylayers.html">Reference</a></li>
       </ul>

<div class="search_form">

<div id="cse" style="width: 100%;"></div>
<script>
  (function() {
       var cx = '004820205189002234612:sa15qzuf2ca';
           var gcse = document.createElement('script');
               gcse.type = 'text/javascript';
                   gcse.async = true;
                       gcse.src = (document.location.protocol == 'https:' ?
                           'https:' : 'http:') +
                               '//cse.google.com/cse.js?cx=' + cx;
                                   var s =
                                   document.getElementsByTagName('script')[0];
                                       s.parentNode.insertBefore(gcse, s);
                                         })();
</script>
<gcse:search></gcse:search>
</div>
</div> <!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
	   <div class="rel rellarge">
	     
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  -->
	<div class="rellink">
	<a href="../../py-modindex.html" title="Python Module Index"
	    >Modules
	    <br>
	    <span class="smallrellink">
	    Python Module...
	    </span>
	    <span class="hiddenrellink">
	    Python Module Index
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page -->
    </div>
    <p style="text-align: center; background-color: #BFFFFF">This documentation is

    for Python <strong>version 1</strong>
    &mdash; <a href="https://github.com/pylayers/pylayers/archive/master.zip">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="../../about.html#citing-pylayers">citing pylayers</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">Example of TDOA</a></li>
</ul>

    
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pylayers.location.algebraic.algebraic</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.util.geomutil</span> <span class="kn">import</span> <span class="n">dist</span>
</pre></div>
</div>
<div class="section" id="example-of-tdoa">
<h1>Example of TDOA<a class="headerlink" href="#example-of-tdoa" title="Permalink to this headline">Â¶</a></h1>
<p>First, it is necesary to define Anchor nodes and associated Reference
Anchor Nodes. This is important to be very specific about what exactly
the TDOA is. In the example the Blin node is draw randomly as well as
anchor nodes.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">AN_TDOA</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
<span class="c1">#AN_TDOA1=np.array([[0, 0, 1, 1],[0,1,1,0]])</span>
<span class="c1">#AN_TDOAr1 = np.roll(AN_TDOA,1,axis=1)</span>
<span class="n">AN_TDOAr1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">AN_TDOAr2</span> <span class="o">=</span> <span class="n">AN_TDOA</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">][:,</span><span class="n">newaxis</span><span class="p">]</span>
<span class="n">BN</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.2</span><span class="p">],[</span><span class="mf">0.3</span><span class="p">]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-2-79b4e5964fd9&gt; in &lt;module&gt;()
      5 #AN_TDOAr1 = np.roll(AN_TDOA,1,axis=1)
      6 AN_TDOAr1 = np.zeros((2,1))
----&gt; 7 AN_TDOAr2 = AN_TDOA[:,-1][:,newaxis]
      8 BN = np.array([[0.2],[0.3]])


NameError: name &#39;newaxis&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">AN_TDOA</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.1172917</span> <span class="p">,</span>  <span class="mf">0.85299383</span><span class="p">,</span>  <span class="mf">0.2289946</span> <span class="p">,</span>  <span class="mf">0.17593613</span><span class="p">,</span>  <span class="mf">0.56199628</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.09755558</span><span class="p">,</span>  <span class="mf">0.25577299</span><span class="p">,</span>  <span class="mf">0.16259968</span><span class="p">,</span>  <span class="mf">0.09864148</span><span class="p">,</span>  <span class="mf">0.51069025</span><span class="p">]])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">AN_TDOAr1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">array</span><span class="p">([[</span> <span class="mf">0.</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">0.</span><span class="p">]])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">AN_TDOAr2</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-5-436f1e4f0ad6&gt; in &lt;module&gt;()
----&gt; 1 AN_TDOAr2


NameError: name &#39;AN_TDOAr2&#39; is not defined
</pre></div>
</div>
<p>The figure below illustrates the situation, in red the anchor nodes, the
blue star is the blind node.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">plot</span><span class="p">(</span><span class="n">AN_TDOA</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span><span class="n">AN_TDOA</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span><span class="s1">&#39;or&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">AN_TDOAr2</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span><span class="n">AN_TDOAr2</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span><span class="s1">&#39;ok&#39;</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">BN</span><span class="p">[</span><span class="mi">0</span><span class="p">,:],</span><span class="n">BN</span><span class="p">[</span><span class="mi">1</span><span class="p">,:],</span><span class="s1">&#39;*b&#39;</span><span class="p">)</span>
<span class="n">axis</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-6-92be54b6c82d&gt; in &lt;module&gt;()
----&gt; 1 plot(AN_TDOA[0,:],AN_TDOA[1,:],&#39;or&#39;)
      2 plot(AN_TDOAr2[0,:],AN_TDOAr2[1,:],&#39;ok&#39;)
      3 plot(BN[0,:],BN[1,:],&#39;*b&#39;)
      4 axis([-1,2,-1,2])


NameError: name &#39;plot&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">AN_TDOA</span><span class="p">,</span><span class="n">BN</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">dr1</span><span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">AN_TDOAr1</span><span class="p">,</span><span class="n">BN</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">dr2</span><span class="o">=</span> <span class="n">dist</span><span class="p">(</span><span class="n">AN_TDOAr2</span><span class="p">,</span><span class="n">BN</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-7-25d284671896&gt; in &lt;module&gt;()
----&gt; 1 d = dist(AN_TDOA,BN,0)
      2 dr1= dist(AN_TDOAr1,BN,0)
      3 dr2= dist(AN_TDOAr2,BN,0)


NameError: name &#39;BN&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">tdoa1</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="o">-</span><span class="n">dr1</span><span class="p">)</span><span class="o">/</span><span class="mf">0.3</span>
<span class="n">tdoa2</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="o">-</span><span class="n">dr2</span><span class="p">)</span><span class="o">/</span><span class="mf">0.3</span>
<span class="n">tdoa0</span> <span class="o">=</span> <span class="p">(</span><span class="n">d</span><span class="o">-</span><span class="n">roll</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mf">0.3</span>

<span class="k">print</span> <span class="n">cumsum</span><span class="p">(</span><span class="n">tdoa0</span><span class="p">)</span>
<span class="k">print</span> <span class="n">tdoa1</span>
<span class="k">print</span> <span class="n">tdoa2</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-8-3d7b60d1ff7d&gt; in &lt;module&gt;()
----&gt; 1 tdoa1 = (d-dr1)/0.3
      2 tdoa2 = (d-dr2)/0.3
      3 tdoa0 = (d-roll(d,1))/0.3
      4
      5 print cumsum(tdoa0)


NameError: name &#39;d&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="p">{}</span>
<span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;BN&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">BN</span>
<span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;RN_TDOA&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">AN_TDOA</span>
<span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;RNr_TDOA&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">AN_TDOAr2</span>
<span class="n">ldp</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">ldp</span><span class="p">[</span><span class="s1">&#39;TDOA&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">cumsum</span><span class="p">(</span><span class="n">tdoa0</span><span class="p">)</span>
<span class="n">ldp</span><span class="p">[</span><span class="s1">&#39;TDOA_std&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-9-d6830f92a80e&gt; in &lt;module&gt;()
      1 node={}
----&gt; 2 nodes[&#39;BN&#39;]=BN
      3 nodes[&#39;RN_TDOA&#39;]=AN_TDOA
      4 nodes[&#39;RNr_TDOA&#39;]=AN_TDOAr2
      5 ldp = {}


NameError: name &#39;BN&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">S</span><span class="o">=</span><span class="n">algloc</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span><span class="n">ldp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-10-bb0e749f8356&gt; in &lt;module&gt;()
----&gt; 1 S=algloc(nodes,ldp)


NameError: name &#39;ldp&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-11-7e129c87000d&gt; in &lt;module&gt;()
----&gt; 1 S.info()


NameError: name &#39;S&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">algloc</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span><span class="n">ldp</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-12-61c872391df3&gt; in &lt;module&gt;()
----&gt; 1 S = algloc(nodes,ldp)


NameError: name &#39;ldp&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">ls_locate</span><span class="p">(</span><span class="n">tdoa</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">toa</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">rss</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-13-4c8efe0f5b1d&gt; in &lt;module&gt;()
----&gt; 1 S.ls_locate(tdoa=True,toa=False,rss=False)


NameError: name &#39;S&#39; is not defined
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span></span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;BN&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------

KeyError                                  Traceback (most recent call last)

&lt;ipython-input-14-406418aaf451&gt; in &lt;module&gt;()
----&gt; 1 nodes[&#39;BN&#39;]


KeyError: &#39;BN&#39;
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; 2015, PyLayers developer team.
      Last updated on avril 06, 2016.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.5. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="../../_sources/notebook/7-APP/LOC-localization.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel rellarge">
    
    <div class="buttonPrevious">
      <a href="../../py-modindex.html">
        Previous
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#AFFFFF');
           },
           function () {
               $(this).css('background-color', '#AFFFFF');
           }
       );
     </script>
  </body>
</html>