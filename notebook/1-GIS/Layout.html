
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.1.1.1. Description of the propagation environment &mdash; Python 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="Python 1 documentation" href="../../index.html" />
    <link rel="up" title="1. 1   Overview" href="../TOC.html" />
    <link rel="next" title="PyLayers" href="../../modules/pylayers.html" />
    <link rel="prev" title="1. 1   Overview" href="../TOC.html" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34943220-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body role="document">

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img src="../../_static/pylayers.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="../../download.html">Download</a></li>
            <li><a href="../TOC.html">User Guide</a></li>
            <li><a href="../../modules/pylayers.html">Reference</a></li>
       </ul>

<div class="search_form">

<div id="cse" style="width: 100%;"></div>
<script>
  (function() {
       var cx = '004820205189002234612:sa15qzuf2ca';
           var gcse = document.createElement('script');
               gcse.type = 'text/javascript';
                   gcse.async = true;
                       gcse.src = (document.location.protocol == 'https:' ?
                           'https:' : 'http:') +
                               '//cse.google.com/cse.js?cx=' + cx;
                                   var s =
                                   document.getElementsByTagName('script')[0];
                                       s.parentNode.insertBefore(gcse, s);
                                         })();
</script>
<gcse:search></gcse:search>
</div>
</div> <!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
	  <div class="rel">
	   
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  -->
	<div class="rellink">
	<a href="../TOC.html" title="1. 1   Overview"
	    accesskey="P">Previous
	    <br>
	    <span class="smallrellink">
	    1. 1   Overview
	    </span>
	    <span class="hiddenrellink">
	    1. 1   Overview
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="../../modules/pylayers.html" title="PyLayers"
	    accesskey="N">Next
	    <br>
	    <span class="smallrellink">
	    PyLayers
	    </span>
	    <span class="hiddenrellink">
	    PyLayers
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="../../py-modindex.html" title="Python Module Index"
	    >Modules
	    <br>
	    <span class="smallrellink">
	    Python Module...
	    </span>
	    <span class="hiddenrellink">
	    Python Module Index
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page -->
	<div class="spacer">
	&nbsp;
	</div>
	<div class="rellink">
	<a href="../TOC.html" title="1. 1   Overview" >
	Up
	<br>
	<span class="smallrellink">
	1. 1   Overview
	</span>
	<span class="hiddenrellink">
	1. 1   Overview
	</span>
	
	</a>
	</div>
    </div>
    <p style="text-align: center; background-color: #BFFFFF">This documentation is

    for Python <strong>version 1</strong>
    &mdash; <a href="https://github.com/pylayers/pylayers/archive/master.zip">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="../../about.html#citing-pylayers">citing pylayers</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">2.1.1.1. Description of the propagation environment</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-all-available-layouts-the-ls-method">2.1.1.1.1. Getting the list of all available Layouts : the <code class="docutils literal"><span class="pre">ls()</span></code> method</a></li>
<li><a class="reference internal" href="#the-useful-numpy-arrays-of-the-layout">2.1.1.1.2. The useful numpy arrays of the Layout</a><ul>
<li><a class="reference internal" href="#pt-the-array-of-points">2.1.1.1.2.1. <code class="docutils literal"><span class="pre">pt</span></code> the array of points</a></li>
<li><a class="reference internal" href="#tahe-tail-head">2.1.1.1.2.2. tahe (tail-head)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tgs-trancodage-from-graph-indexing-to-numpy-array-indexing">2.1.1.1.3. <code class="docutils literal"><span class="pre">tgs</span></code> : trancodage from graph indexing to numpy array indexing</a></li>
</ul>
</li>
</ul>

    
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; !date
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>samedi 30 juillet 2016, 16:53:12 (UTC+0200)
</pre></div>
</div>
<div class="section" id="description-of-the-propagation-environment">
<h1>2.1.1.1. Description of the propagation environment<a class="headerlink" href="#description-of-the-propagation-environment" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">Layout</span></code> class contains the data structure for describing a
propagation environment. It contains different graphs helping the
implementation of the ray tracing. The class is implemented in the</p>
<p><a class="reference external" href="http://pylayers.github.io/pylayers/modules/pylayers.gis.layout.html">layout.py</a></p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; from pylayers.gis.layout import *
&gt;&gt;&gt; from IPython.display import Image
&gt;&gt;&gt; import os
&gt;&gt;&gt; %matplotlib inline
</pre></div>
</div>
<div class="section" id="getting-the-list-of-all-available-layouts-the-ls-method">
<h2>2.1.1.1.1. Getting the list of all available Layouts : the <code class="docutils literal"><span class="pre">ls()</span></code> method<a class="headerlink" href="#getting-the-list-of-all-available-layouts-the-ls-method" title="Permalink to this headline">¶</a></h2>
<p>Creating a default Layout is as simple as :</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L=Layout()
&gt;&gt;&gt; L
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>----------------
newfile.ini
----------------

Number of points  : 0
Number of segments  : 0
Number of sub segments  : 0
Number of cycles  : 0
Number of rooms  : 0

xrange :(-50, 50)
yrange :(-50, 50)

Useful dictionnaries
----------------
name :  {slab :seglist}

Useful arrays
----------------

Useful tip
----------------
Point p in Gs =&gt; p_coord:
Segment s in Gs =&gt; s_ab coordinates
s -&gt; u = self.tgs[s] -&gt; v = self.tahe[:,u] -&gt; s_ab = self.pt[:,v]
</pre></div>
</div>
<p>Querying the file name associated with the Layout.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L._filename
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&#39;newfile.ini&#39;
</pre></div>
</div>
<p>The Layout is described in an <code class="docutils literal"><span class="pre">.ini</span></code> file.</p>
<p>The <code class="docutils literal"><span class="pre">ls()</span></code> method lists the layout files which are available in the
<code class="docutils literal"><span class="pre">struc</span></code> directory of your current project, which is set up via the
$BASENAME environment variable which should be defined in order PyLayers
find the good directories.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.ls(&#39;ini&#39;)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[&#39;11Dbibli.ini&#39;,
 &#39;Allee_Jean_Perrin_Rennes.ini&#39;,
 &#39;B11.ini&#39;,
 &#39;CEA.ini&#39;,
 &#39;CEA2.ini&#39;,
 &#39;CORM1.ini&#39;,
 &#39;Campus_de_Beaulieu_Rennes.ini&#39;,
 &#39;DLR.ini&#39;,
 &#39;DLR2.ini&#39;,
 &#39;Eiranranta,_Helsinki.ini&#39;,
 &#39;IETR_Avenue_Jean_Perrin_Rennes.ini&#39;,
 &#39;Luebbers.ini&#39;,
 &#39;MOCAP-small.ini&#39;,
 &#39;MOCAP-small2.ini&#39;,
 &#39;MOCAP.ini&#39;,
 &#39;MOCAPext.ini&#39;,
 &#39;Noyal_Sur_Vilaine.ini&#39;,
 &#39;Rennes.ini&#39;,
 &#39;Scene.ini&#39;,
 &#39;Servon sur Vilaine.ini&#39;,
 &#39;Servon_Sur_Vilaine.ini&#39;,
 &#39;St_Marinkiche_Berlin.ini&#39;,
 &#39;St_Marinkirche_Berlin.ini&#39;,
 &#39;TA-Office.ini&#39;,
 &#39;TA-Office3.ini&#39;,
 &#39;TC1_METIS.ini&#39;,
 &#39;TC1_METIS_air.ini&#39;,
 &#39;TC1_METIS_air_closed.ini&#39;,
 &#39;TC1_METIS_closed.ini&#39;,
 &#39;TC1_METIS_h.ini&#39;,
 &#39;TC1_METIS_old.ini&#39;,
 &#39;TC2_3x3.ini&#39;,
 &#39;TC2_METIS.ini&#39;,
 &#39;TC2_METIS_h.ini&#39;,
 &#39;TC2_METIS_new.ini&#39;,
 &#39;W2PTIN.ini&#39;,
 &#39;WHERE1-new.ini&#39;,
 &#39;WHERE1.ini&#39;,
 &#39;WHERE1_v1.0.ini&#39;,
 &#39;defdiff.ini&#39;,
 &#39;defsthdiff.ini&#39;,
 &#39;defstr.ini&#39;,
 &#39;edge.ini&#39;,
 &#39;klepal.ini&#39;,
 &#39;lat_40_72847_lon_-74_00763.ini&#39;,
 &#39;lat_40_72919_lon_-73_99695.ini&#39;,
 &#39;lat_60_2040231_lon_24_6584093.ini&#39;,
 &#39;lat_60_204_lon_24_658.ini&#39;,
 &#39;scattering.ini&#39;,
 &#39;test.ini&#39;]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L=Layout(&#39;defstr.ini&#39;)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>----------------
defstr.ini
----------------

Number of points  : 12
Number of segments  : 13
Number of sub segments  : 3
Number of cycles  : 0
Number of rooms  : 0
degree 0 : []
degree 1 : [-8 -7]
number of node point of degree 2 : 4
number of node point of degree 3 : 2

xrange :(757.0, 770.0)
yrange :(1110.955, 1116.545)

Useful dictionnaries
----------------
sl {slab name : slab dictionary}
name :  {slab :seglist}

Useful arrays
----------------
pt : numpy array of points
normal : numpy array of normal
offset : numpy array of offset
tsg : get segment index in Gs from tahe
isss :  sub-segment index above Nsmax
tgs : get segment index in tahe from self.Gs
upnt : get point id index from self.pt
lsss : list of segments with sub-segment
sla : list of all slab names (Nsmax+Nss+1)
degree : degree of nodes

Useful tip
----------------
Point p in Gs =&gt; p_coord:
Segment s in Gs =&gt; s_ab coordinates
s -&gt; u = self.tgs[s] -&gt; v = self.tahe[:,u] -&gt; s_ab = self.pt[:,v]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f,a=L.showG(&#39;s&#39;,nodes=True,slab=True,subseg=True,figsize=(10,10),labels=True)
</pre></div>
</div>
<img alt="../../_images/Layout_11_0.png" src="../../_images/Layout_11_0.png" />
<p>L.ax provides the boundary of the layout with the following format :
(xmin,xmax,ymin,ymax)</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.ax
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>(757.0, 770.0, 1110.955, 1116.545)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.build()
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>building Layout ...
check len(ncycles) == 2 passed
</pre></div>
</div>
<p>This Layout has several convex cycles which are stored in the Gt graph.
The diffraction points are stored in the dictionnary <code class="docutils literal"><span class="pre">L.ddiff</span></code>. The
keys of this dictionnary are the diffraction points number and the
values are a zipped list of output cycles and corresponding wedge
angles.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.Gv.node
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>{-8: {},
 -7: {},
 -6: {},
 -4: {},
 -3: {},
 -1: {},
 1: {},
 2: {},
 3: {},
 4: {},
 5: {},
 6: {},
 7: {},
 8: {},
 9: {},
 15: {},
 19: {},
 25: {},
 28: {}}
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.ddiff
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>{-8: ([7, 15], 6.283185307179586),
 -7: ([7, 15], 6.283185307179586),
 -6: ([14, 5], 4.7123889803846897),
 -4: ([14, 16], 4.7123889803846897),
 -3: ([11, 16], 4.7123889803846897),
 -1: ([5, 11], 4.7723171355059337)}
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.Gt.node
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>{0: {&#39;hash&#39;: &#39;acefe8aedd705b18ff066c9f8587c883&#39;, &#39;indoor&#39;: False},
 5: {&#39;indoor&#39;: False,
  &#39;inter&#39;: [(13, 5, 0),
   (13, 0, 5),
   (19, 5, 14),
   (19, 14, 5),
   (4, 5),
   (4, 5, 7),
   (4, 7, 5),
   (15, 5, 11),
   (15, 11, 5),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (757.0,1110.955)
  (757.0,1116.545)
  (758.5,1115.9)
  (758.5,1111.6)

  vnodes : (-9 13 -12 19 -6 4 -1 15 )},
 7: {&#39;indoor&#39;: True,
  &#39;inter&#39;: [(1, 7),
   (1, 7, 15),
   (1, 15, 7),
   (2, 7),
   (2, 7, 15),
   (2, 15, 7),
   (9, 7),
   (9, 7, 11),
   (9, 11, 7),
   (4, 7),
   (4, 7, 5),
   (4, 5, 7),
   (5, 7),
   (5, 7, 14),
   (5, 14, 7),
   (3, 7),
   (3, 7, 15),
   (3, 15, 7),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (763.5,1114.432)
  (763.5,1113.432)
  (763.5,1111.9)
  (758.5,1111.6)
  (758.5,1115.9)
  (763.5,1115.9)

  vnodes : (-7 1 -8 2 -2 9 -1 4 -6 5 -5 3 )},
 11: {&#39;indoor&#39;: False,
  &#39;inter&#39;: [(8, 11),
   (8, 11, 15),
   (8, 15, 11),
   (25, 11, 16),
   (25, 16, 11),
   (10, 11, 0),
   (10, 0, 11),
   (15, 11, 5),
   (15, 5, 11),
   (9, 11),
   (9, 11, 7),
   (9, 7, 11),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (763.5,1111.9)
  (768.5,1111.9)
  (770.0,1110.955)
  (757.0,1110.955)
  (758.5,1111.6)

  vnodes : (-2 8 -3 25 -10 10 -9 15 -1 9 )},
 14: {&#39;indoor&#39;: False,
  &#39;inter&#39;: [(28, 14, 16),
   (28, 16, 14),
   (6, 14),
   (6, 14, 15),
   (6, 15, 14),
   (5, 14),
   (5, 14, 7),
   (5, 7, 14),
   (19, 14, 5),
   (19, 5, 14),
   (12, 14, 0),
   (12, 0, 14),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (770.0,1116.545)
  (768.5,1115.9)
  (763.5,1115.9)
  (758.5,1115.9)
  (757.0,1116.545)

  vnodes : (-11 28 -4 6 -5 5 -6 19 -12 12 )},
 15: {&#39;indoor&#39;: True,
  &#39;inter&#39;: [(3, 15),
   (3, 15, 7),
   (3, 7, 15),
   (6, 15),
   (6, 15, 14),
   (6, 14, 15),
   (7, 15),
   (7, 15, 16),
   (7, 16, 15),
   (8, 15),
   (8, 15, 11),
   (8, 11, 15),
   (2, 15),
   (2, 15, 7),
   (2, 7, 15),
   (1, 15),
   (1, 15, 7),
   (1, 7, 15),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (763.5,1114.432)
  (763.5,1115.9)
  (768.5,1115.9)
  (768.5,1111.9)
  (763.5,1111.9)
  (763.5,1113.432)

  vnodes : (-7 3 -5 6 -4 7 -3 8 -2 2 -8 1 )},
 16: {&#39;indoor&#39;: False,
  &#39;inter&#39;: [(7, 16),
   (7, 16, 15),
   (7, 15, 16),
   (28, 16, 14),
   (28, 14, 16),
   (11, 16, 0),
   (11, 0, 16),
   (25, 16, 11),
   (25, 11, 16),
   (-3,),
   (-4,)],
  &#39;isopen&#39;: True,
  &#39;polyg&#39;: (768.5,1111.9)
  (768.5,1115.9)
  (770.0,1116.545)
  (770.0,1110.955)

  vnodes : (-3 7 -4 28 -11 11 -10 25 )}}
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L=Layout(&#39;DLR.ini&#39;)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f,a=L.showG(&#39;s&#39;,aw=False)
</pre></div>
</div>
<img alt="../../_images/Layout_20_0.png" src="../../_images/Layout_20_0.png" />
<p>To check which are the used slabs :</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; Slabs = np.unique(L.sla)
&gt;&gt;&gt; for s in Slabs:
&gt;&gt;&gt;     if s in L.sl:
           print L.sl[s]
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>3D_WINDOW_GLASS : GLASS | AIR | GLASS | [0.05, 0.05, 0.05]
       blue3 1

AIR : AIR | [0.05]
       white 1

DOOR : WOOD | [0.05]
       red1 1

METAL : METAL | [0.05]
       black 4

PARTITION : PLASTER | [0.05]
       grey80 4

WALL : BRICK | [0.05]
       grey20 3
</pre></div>
</div>
<p>Let&#8217;s load an other layout. This an indoor office where the FP7 WHERE
project UWB impulse radio measuremnts have been performed.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L=Layout(&#39;WHERE1.ini&#39;)
</pre></div>
</div>
<p>The showG method provides many possible visualization of the layout</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f,a=L.showG(&#39;s&#39;,airwalls=False,figsize=(20,10))
</pre></div>
</div>
<img alt="../../_images/Layout_26_0.png" src="../../_images/Layout_26_0.png" />
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L=Layout(&#39;W2PTIN.ini&#39;)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>It exists degree 1 points : [-80]
</pre></div>
</div>
<img alt="../../_images/Layout_27_1.png" src="../../_images/Layout_27_1.png" />
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f,a = L.showG(&#39;s&#39;)
</pre></div>
</div>
<img alt="../../_images/Layout_28_0.png" src="../../_images/Layout_28_0.png" />
</div>
<div class="section" id="the-useful-numpy-arrays-of-the-layout">
<h2>2.1.1.1.2. The useful numpy arrays of the Layout<a class="headerlink" href="#the-useful-numpy-arrays-of-the-layout" title="Permalink to this headline">¶</a></h2>
<p>The layout data structure is a mix between graph and numpy array. numpy
arrays are used when high performance is required while graph structure
is convenient when dealing with different specific tasks. The tricky
thing for the mind is to have to transcode between node index excluding
0 and numpy array index including 0. Below are listed various useful
numpy array which are mostly used internally.</p>
<ul class="simple">
<li>tsg : get segment index in Gs from tahe</li>
<li>isss : sub-segment index above Nsmax</li>
<li>tgs : get segment index in tahe from Gs</li>
<li>lsss : list of segments with sub-segment</li>
<li>sla : list of all slab names (Nsmax+Nss+1)</li>
<li>degree : degree of nodes</li>
</ul>
<div class="section" id="pt-the-array-of-points">
<h3>2.1.1.1.2.1. <code class="docutils literal"><span class="pre">pt</span></code> the array of points<a class="headerlink" href="#pt-the-array-of-points" title="Permalink to this headline">¶</a></h3>
<p>The point coordinates are stored in two different places</p>
<ul class="simple">
<li>L.Gs.pos : in a dictionary form (key is the point negative index)</li>
<li>L.pt : in a numpy array</li>
</ul>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print np.shape(L.pt)
&gt;&gt;&gt; print len(filter(lambda x: x&lt;0,L.Gs.pos))
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>(2, 181)
185
</pre></div>
</div>
<p>This dual storage is chosen for computational efficiency reason. The
priority goes to the graph and the numpy array is calculated at the end
of the edition in the <code class="docutils literal"><span class="pre">Layout.g2npy</span></code> method (graph to numpy) which is
in charge of the conversion.</p>
</div>
<div class="section" id="tahe-tail-head">
<h3>2.1.1.1.2.2. tahe (tail-head)<a class="headerlink" href="#tahe-tail-head" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">tahe</span></code> is a  where  denotes the
number of segment. The first line is the tail index of the segment
 and the second line is the head of the segment .
Where  is the index of a given segment (starting in 0).</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.build()
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>building Layout ...
check len(ncycles) == 2 passed
</pre></div>
</div>
<p>The figure below illustrates a Layout and a superimposition of the graph
of cycles . Those cycles are automatically
extracted from a well defined layout. This concept of <strong>cycles</strong> is
central in the ray determination algorithm which is implemented in
PyLayers. Notice that the exterior region is the cycle indexed by 0. All
the rooms which have a common frontier with the exterior cycle are here
connected to the origin (corresponding to exterior cycle).</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; f,a = L.showG(&#39;s&#39;)
</pre></div>
</div>
<img alt="../../_images/Layout_34_0.png" src="../../_images/Layout_34_0.png" />
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; nx.draw_networkx_nodes(L.Gi,L.Gi.pos,node_color=&#39;blue&#39;,node_size=1)
&gt;&gt;&gt; nx.draw_networkx_edges(L.Gi,L.Gi.pos,node_color=&#39;blue&#39;,node_size=1)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.LineCollection at 0x7f5aa13e2e10&gt;
</pre></div>
</div>
<img alt="../../_images/Layout_35_1.png" src="../../_images/Layout_35_1.png" />
</div>
</div>
<div class="section" id="tgs-trancodage-from-graph-indexing-to-numpy-array-indexing">
<h2>2.1.1.1.3. <code class="docutils literal"><span class="pre">tgs</span></code> : trancodage from graph indexing to numpy array indexing<a class="headerlink" href="#tgs-trancodage-from-graph-indexing-to-numpy-array-indexing" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">tgs</span></code> is an array with length +1. The index 0 is not used
because none segment has 0 as an index.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; ns = 5
&gt;&gt;&gt; utahe = L.tgs[ns]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; tahe =  L.tahe[:,utahe]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; ptail = L.pt[:,tahe[0]]
&gt;&gt;&gt; phead = L.pt[:,tahe[1]]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print ptail
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[ 29.785   6.822]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print phead
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[ 27.414   6.822]
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; L.Gs.node[5]
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>{&#39;connect&#39;: [-8, -139],
 &#39;name&#39;: &#39;PARTITION&#39;,
 &#39;ncycles&#39;: [240, 245],
 &#39;norm&#39;: array([ 0., -1.,  0.]),
 &#39;offset&#39;: 0,
 &#39;transition&#39;: False,
 &#39;z&#39;: (0, 3.0)}
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print L.Gs.pos[-8]
&gt;&gt;&gt; print L.Gs.pos[-139]
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>(29.785, 6.822)
(27.414, 6.822)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; aseg = np.array([4,7,134])
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; print np.shape(aseg)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>(3,)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>&gt;&gt;&gt; pt  = L.tahe[:,L.tgs[aseg]][0,:]
&gt;&gt;&gt; ph = L.tahe[:,L.tgs[aseg]][1,:]
&gt;&gt;&gt; pth = np.vstack((pt,ph))
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; 2016, PyLayers developer team.
      Last updated on Jul 31, 2016.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.5a0. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="../../_sources/notebook/1-GIS/Layout.rst.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel">
    
    <div class="buttonPrevious">
      <a href="../TOC.html">
        Previous
      </a>  
    </div>
    <div class="buttonNext">
      <a href="../../modules/pylayers.html">
        Next
      </a>  
    </div>
    <div class="buttonPrevious">
      <a href="../../py-modindex.html">
        Previous
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#AFFFFF');
           },
           function () {
               $(this).css('background-color', '#AFFFFF');
           }
       );
     </script>
  </body>
</html>