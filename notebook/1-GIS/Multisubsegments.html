
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.1.1.2. Effect of Modifying the Nature of Sub-Segments &mdash; Python 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="Python 1 documentation" href="../../index.html" />
    <link rel="up" title="1. 1   Overview" href="../TOC.html" />
    <link rel="next" title="2.1.2.1. Geographical Information and the Earth Zone class : Ezone" href="Ezone.html" />
    <link rel="prev" title="2.1.1.1. Description of the propagation environment" href="Layout.html" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34943220-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </head>
  <body role="document">

    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../../index.html">
            <img src="../../_static/pylayers.png" alt="Logo"/>
          </a>
          </p><div class="navbar">
          <ul>
            <li><a href="../../download.html">Download</a></li>
            <li><a href="../TOC.html">User Guide</a></li>
            <li><a href="../../modules/pylayers.html">Reference</a></li>
       </ul>

<div class="search_form">

<div id="cse" style="width: 100%;"></div>
<script>
  (function() {
       var cx = '004820205189002234612:sa15qzuf2ca';
           var gcse = document.createElement('script');
               gcse.type = 'text/javascript';
                   gcse.async = true;
                       gcse.src = (document.location.protocol == 'https:' ?
                           'https:' : 'http:') +
                               '//cse.google.com/cse.js?cx=' + cx;
                                   var s =
                                   document.getElementsByTagName('script')[0];
                                       s.parentNode.insertBefore(gcse, s);
                                         })();
</script>
<gcse:search></gcse:search>
</div>
</div> <!-- end navbar --></div>
    </div>

    <div class="content-wrapper">

      <div class="sphinxsidebar">
	<div class="sphinxsidebarwrapper">
	  <div class="rel">
	   
	<!-- rellinks[1:] is an ugly hack to avoid link to module
	    index  -->
	<div class="rellink">
	<a href="Layout.html" title="2.1.1.1. Description of the propagation environment"
	    accesskey="P">Previous
	    <br>
	    <span class="smallrellink">
	    2.1.1.1. Desc...
	    </span>
	    <span class="hiddenrellink">
	    2.1.1.1. Description of the propagation environment
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="Ezone.html" title="2.1.2.1. Geographical Information and the Earth Zone class : Ezone"
	    accesskey="N">Next
	    <br>
	    <span class="smallrellink">
	    2.1.2.1. Geog...
	    </span>
	    <span class="hiddenrellink">
	    2.1.2.1. Geographical Information and the Earth Zone class : Ezone
	    </span>
	    
	    </a>
	</div>
	    <div class="spacer">
	    &nbsp;
	    </div>
	
	<div class="rellink">
	<a href="../../py-modindex.html" title="Python Module Index"
	    >Modules
	    <br>
	    <span class="smallrellink">
	    Python Module...
	    </span>
	    <span class="hiddenrellink">
	    Python Module Index
	    </span>
	    
	    </a>
	</div>
	<!-- Ad a link to the 'up' page -->
	<div class="spacer">
	&nbsp;
	</div>
	<div class="rellink">
	<a href="../TOC.html" title="1. 1   Overview" >
	Up
	<br>
	<span class="smallrellink">
	1. 1   Overview
	</span>
	<span class="hiddenrellink">
	1. 1   Overview
	</span>
	
	</a>
	</div>
    </div>
    <p style="text-align: center; background-color: #BFFFFF">This documentation is

    for Python <strong>version 1</strong>
    &mdash; <a href="https://github.com/pylayers/pylayers/archive/master.zip">Other versions</a></p>
    
    <h3>Citing</h3>
    <p>If you use the software, please consider
    <a href="../../about.html#citing-pylayers">citing pylayers</a>.</p>
    <h3>This page</h3>
	<ul>
<li><a class="reference internal" href="#">2.1.1.2. Effect of Modifying the Nature of Sub-Segments</a></li>
</ul>

    
    </div>
	  </div>


      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="code python highlight-none"><div class="highlight"><pre><span></span>!date
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>mardi 30 aot 2016, 16:13:03 (UTC+0200)
</pre></div>
</div>
<div class="section" id="effect-of-modifying-the-nature-of-sub-segments">
<h1>2.1.1.2. Effect of Modifying the Nature of Sub-Segments<a class="headerlink" href="#effect-of-modifying-the-nature-of-sub-segments" title="Permalink to this headline">¶</a></h1>
<p>This notebook illustrates a simple ray tracing simulation. The
environement is a building with 2 rooms. At the interface betweebn the
two rooms there is a segment with 3 sub-segment whose material
properties are changed in the simulation. The notebook illustrates in
details the different steps of the simulation. First we need to import
several specialized modules.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>from pylayers.simul.link import *
from pylayers.antprop.rays import *
from pylayers.antprop.aarray import *
from pylayers.antprop.channel import *
from pylayers.gis.layout import *
from pylayers.antprop.signature import *
import pylayers.signal.bsignal as bs
import pylayers.signal.waveform as wvf
from pylayers.simul.simulem import *
import matplotlib.pyplot as plt
%matplotlib inline
</pre></div>
</div>
<p>Let&#8217;s start by loading a simple layout with 2 single rooms. The multi
subsegment appears in the middle with the red vertical lines. Each
subsegment is materialized by a segment.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>L=Layout(&#39;defstr.ini&#39;)
f,a=L.showG(&#39;s&#39;,subseg=True,figsize=(10,10))
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_4_0.png" src="../../_images/Multisubsegments_4_0.png" />
<p>The studied configuration is composed of a simple 2 rooms building
separated by a subsegment which has a multi subsegment attribute. The
attribute of the subsegment can be changed with the method
<code class="docutils literal"><span class="pre">`chgmss</span></code> &lt;<a class="reference external" href="http://pylayers.github.io/%20pylayers/modules/generated/pylayers.gis.layout.Layout.chgmss.html">http://pylayers.github.io/%20pylayers/modules/generated/pylayers.gis.layout.Layout.chgmss.html</a>&gt;`__
(change multisubsegment). In the example WOOD in the lower part then
10cm of AIR then wood again until the ceiling.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>L.chgmss(1,ss_name=[&#39;WOOD&#39;,&#39;AIR&#39;,&#39;WOOD&#39;],ss_z =[(0.0,2.7),(2.7,2.8),(2.8,3)],ss_offset=[0,0,0])
</pre></div>
</div>
<p>The  graph dictionary has the following structure</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>L.Gs.node
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>{-12: {},
 -11: {},
 -10: {},
 -9: {},
 -8: {},
 -7: {},
 -6: {},
 -5: {},
 -4: {},
 -3: {},
 -2: {},
 -1: {},
 1: {&#39;connect&#39;: [-8, -7],
  &#39;name&#39;: &#39;PARTITION&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([-1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;ss_name&#39;: [&#39;WOOD&#39;, &#39;AIR&#39;, &#39;WOOD&#39;],
  &#39;ss_offset&#39;: [0, 0, 0],
  &#39;ss_z&#39;: [(0.0, 2.7), (2.7, 2.8), (2.8, 3)],
  &#39;transition&#39;: True,
  &#39;z&#39;: (0.0, 3.0)},
 2: {&#39;connect&#39;: [-8, -2],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 3: {&#39;connect&#39;: [-7, -5],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([-1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 4: {&#39;connect&#39;: [-6, -1],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 5: {&#39;connect&#39;: [-6, -5],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 0.,  1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 6: {&#39;connect&#39;: [-5, -4],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 0.,  1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 7: {&#39;connect&#39;: [-4, -3],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 8: {&#39;connect&#39;: [-3, -2],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 0., -1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 9: {&#39;connect&#39;: [-2, -1],
  &#39;name&#39;: &#39;WALL&#39;,
  &#39;ncycles&#39;: [],
  &#39;norm&#39;: array([ 0.,  1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: False,
  &#39;z&#39;: (0.0, 3.0)},
 10: {&#39;connect&#39;: [-9, -10],
  &#39;name&#39;: &#39;_AIR&#39;,
  &#39;norm&#39;: array([ 0., -1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: True,
  &#39;z&#39;: [0.0, 3.0]},
 11: {&#39;connect&#39;: [-10, -11],
  &#39;name&#39;: &#39;_AIR&#39;,
  &#39;norm&#39;: array([ 1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: True,
  &#39;z&#39;: [0.0, 3.0]},
 12: {&#39;connect&#39;: [-11, -12],
  &#39;name&#39;: &#39;_AIR&#39;,
  &#39;norm&#39;: array([ 0.,  1.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: True,
  &#39;z&#39;: [0.0, 3.0]},
 13: {&#39;connect&#39;: [-12, -9],
  &#39;name&#39;: &#39;_AIR&#39;,
  &#39;norm&#39;: array([ 1.,  0.,  0.]),
  &#39;offset&#39;: 0,
  &#39;transition&#39;: True,
  &#39;z&#39;: [0.0, 3.0]}}
</pre></div>
</div>
<p>We define now, the position of the transmitter and the receiver, the two
points which are always the termination of a radio link.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>#tx=np.array([759,1114,1.5])
#rx=np.array([767,1114,1.5])
tx=np.array([759,1114,1.5])
rx=np.array([767,1114,1.5])
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>fGHz=np.linspace(1,11,100)
#Aa = Antenna(&#39;S1R1.vsh3&#39;)
#Ab = Antenna(&#39;S1R1.vsh3&#39;)
Aa = Antenna(&#39;Gauss&#39;,fGHz=fGHz)
Ab = Antenna(&#39;Gauss&#39;,fGHz=fGHz)
Ab.eval()
Aa.eval()
#Aa = AntArray(N=[8,1,1],fGHz=fGHz)
#Ab = AntArray(N=[4,1,1],fGHz=fGHz)
Lk = DLink(L=L,a=tx,b=rx,Aa=Aa,Ab=Ab,fGHz=fGHz,cutoff=5)
ak,tauk=Lk.eval(force=True,verbose=False)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>This is the first time the Layout is used. Graphs have to be built. Please Wait
building Layout ...
check len(ncycles) == 2 passed
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>ak.shape
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>(140, 1, 100)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>plt.stem(tauk,ak[:,0,0])
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&lt;Container object of 3 artists&gt;
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_13_1.png" src="../../_images/Multisubsegments_13_1.png" />
<p>A link is the set of a layout and 2 termination points.</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Aa.eval()
Aa.plotG()
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_15_0.png" src="../../_images/Multisubsegments_15_0.png" />
<div class="highlight-none"><div class="highlight"><pre><span></span>(&lt;matplotlib.figure.Figure at 0x7fc76c072bd0&gt;,
 &lt;matplotlib.projections.polar.PolarAxes at 0x7fc7090b74d0&gt;)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Lk.C.Ctt
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>FUsignal :  (100,)  (140, 100)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>ak,tauk=Lk.eval(force=True,a=tx,b=rx,applywav=True)
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Lk.C
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>Ctilde : Ray Propagation Channel Matrices
---------
(140, 100)
Nray : 140
fmin(GHz) : 1.0
fmax(GHz): 11.0
Nfreq : 100
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>f = plt.figure(figsize=(10,10))
f,a=Lk.C.show(cmap=&#39;jet&#39;,fig=f,typ=&#39;l20&#39;,vmin=-120,vmax=-10)
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_19_0.png" src="../../_images/Multisubsegments_19_0.png" />
<div class="code python highlight-none"><div class="highlight"><pre><span></span>fGHz=np.arange(2,6,0.1)
wav = wvf.Waveform(fcGHz=4,bandGHz=1.5)
wav.show()
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_20_0.png" src="../../_images/Multisubsegments_20_0.png" />
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Lk = DLink(L=L,a=tx,b=rx,fGHz=fGHz)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>This is the first time the Layout is used. Graphs have to be built. Please Wait
building Layout ...
check len(ncycles) == 2 passed
</pre></div>
</div>
<p>Position of the transmitter</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Lk.a
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>array([  759. ,  1114. ,     1.5])
</pre></div>
</div>
<p>Position of the receiver</p>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>Lk.b
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>array([  767. ,  1114. ,     1.5])
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>cir = Lk.H.applywavB(wav.sf)
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>WARNING : Tchannel.applywavB is going to be replaced by Tchannel.applywav
</pre></div>
</div>
<div class="code python highlight-none"><div class="highlight"><pre><span></span>layer = [&#39;AIR&#39;,&#39;AIR&#39;,&#39;AIR&#39;]
Lk.L.chgmss(1,ss_name=layer)
Lk.L.Gs.node[1][&#39;ss_name&#39;]=layer
#Aa = Antenna(&#39;Omni&#39;,fGHz=fGHz)
#Aa = Antenna(&#39;Omni&#39;,fGHz=fGHz)
ak,tauk=Lk.eval(force=True,verbose=0,fGHz=fGHz)
plt.stem(Lk.H.taud,Lk.H.ak[:,0,20])
plt.title(str(layer))
plt.figure()
layer = [&#39;METAL&#39;,&#39;METAL&#39;,&#39;METAL&#39;]
Lk.L.chgmss(1,ss_name=layer)
Lk.L.Gs.node[1][&#39;ss_name&#39;]=layer
ak,tauk=Lk.eval(force=True,verbose=0,fGHz=fGHz)
plt.stem(Lk.H.taud,Lk.H.ak[:,0,20])
plt.title(str(layer))
#plt.stem(Lk.H.taud,Lk.H.ak[:,0,50])
plt.figure()
layer = [&#39;WOOD&#39;,&#39;AIR&#39;,&#39;WOOD&#39;]
Lk.L.chgmss(1,ss_name=layer)
Lk.L.Gs.node[1][&#39;ss_name&#39;]=layer
ak,tauk=Lk.eval(force=True,verbose=0,fGHz=fGHz)
plt.title(str(layer))
plt.stem(Lk.H.taud,Lk.H.ak[:,0,20])
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&lt;Container object of 3 artists&gt;
</pre></div>
</div>
<img alt="../../_images/Multisubsegments_27_1.png" src="../../_images/Multisubsegments_27_1.png" />
<img alt="../../_images/Multisubsegments_27_2.png" src="../../_images/Multisubsegments_27_2.png" />
<img alt="../../_images/Multisubsegments_27_3.png" src="../../_images/Multisubsegments_27_3.png" />
<p>We have modified successively the nature of the 3 surfaces in the sub
segment placed in the separation partition. The first was AIR, the
second WOOD and the third METAL. As the subsegment is placed on the LOS
path the blockage effect is clearly visible. The chosen antennas were
omni directional <code class="docutils literal"><span class="pre">Antenna('Omni')</span></code></p>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>
  

    <div class="footer">
        &copy; 2016, PyLayers developer team.
      Last updated on Aug 30, 2016.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.5a0. Design by <a href="http://desgrana.es">Desgrana</a>.
    <span style="padding-left: 5ex;">
    <a href="../../_sources/notebook/1-GIS/Multisubsegments.rst.txt"
	    rel="nofollow">Show this page source</a>
    </span>
    </div>
     <div class="rel">
    
    <div class="buttonPrevious">
      <a href="Layout.html">
        Previous
      </a>  
    </div>
    <div class="buttonNext">
      <a href="Ezone.html">
        Next
      </a>  
    </div>
    <div class="buttonPrevious">
      <a href="../../py-modindex.html">
        Previous
      </a>  
    </div>
    
     </div>
     <script type="text/javascript">
       $("div.buttonNext, div.buttonPrevious").hover(
           function () {
               $(this).css('background-color', '#AFFFFF');
           },
           function () {
               $(this).css('background-color', '#AFFFFF');
           }
       );
     </script>
  </body>
</html>