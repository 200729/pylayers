<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1   Overview &mdash; PyLayers</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="PyLayers" href="../index.html" />
    <link rel="next" title="1. Geographical Information and the Earth Zone class : Ezone" href="1-GIS/Ezone.html" />
    <link rel="prev" title="&lt;no title&gt;" href="../index.html" /> 
  </head>
  <body>
<div style="color: black;background-color: white; font-size: 3.2em; text-align: left; padding: 15px 10px 10px 15px">
    PyLayers
<!--
<a href="../index.html"><img src="../_static/logo.png" height="200" border="0"
    alt="pylayers"/></a>
-->
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="1-GIS/Ezone.html" title="1. Geographical Information and the Earth Zone class : Ezone"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="&lt;no title&gt;"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">PyLayers Home </a> |&nbsp;</li>
        <li><a href="#">Documentation </a> |&nbsp;</li>
        <li><a href="../download.html">Download </a> |&nbsp; </li>
        <li><a href="https://github.com/pylayers/">Developer (Github)</a> </li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1&nbsp;&nbsp;&nbsp;Overview</a></li>
<li><a class="reference internal" href="#radio-propagation-simulation">2&nbsp;&nbsp;&nbsp;Radio Propagation Simulation</a><ul>
<li><a class="reference internal" href="#environement-description">2.1&nbsp;&nbsp;&nbsp;Environement Description</a><ul>
<li><a class="reference internal" href="#indoor">2.1.1&nbsp;&nbsp;&nbsp;Indoor</a><ul>
<li><a class="reference internal" href="#layout-description-and-edition">2.1.1.1&nbsp;&nbsp;&nbsp;Layout Description and Edition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#description-of-the-propagation-environment">2.1.2&nbsp;&nbsp;&nbsp;Description of the propagation environment</a><ul>
<li><a class="reference internal" href="#getting-the-list-of-all-available-layouts-the-ls-method">2.1.2.1&nbsp;&nbsp;&nbsp;Getting the list of all available Layouts : the <tt class="docutils literal"><span class="pre">ls()</span></tt> method</a></li>
<li><a class="reference internal" href="#the-useful-numpy-arrays-of-the-layout">2.1.2.2&nbsp;&nbsp;&nbsp;The useful numpy arrays of the Layout</a><ul>
<li><a class="reference internal" href="#pt-the-array-of-points"><tt class="docutils literal"><span class="pre">pt</span></tt> the array of points</a></li>
<li><a class="reference internal" href="#tahe-tail-head">tahe (tail-head)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tgs-trancodage-from-graph-indexing-to-numpy-array-indexing">2.1.2.3&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">tgs</span></tt> : trancodage from graph indexing to numpy array indexing</a></li>
<li><a class="reference internal" href="#layout-seg2pts-a-function-for-getting-points-coordinates-from-segment-number-array">2.1.2.4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">Layout.seg2pts</span></tt> a function for getting points coordinates from segment number array</a></li>
<li><a class="reference internal" href="#the-layout-class">2.1.2.5&nbsp;&nbsp;&nbsp;The Layout class</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#structure-of-a-layout">Structure of a Layout</a></li>
<li><a class="reference internal" href="#subsegments">Subsegments</a></li>
<li><a class="reference internal" href="#the-different-layout-format">The different layout format</a></li>
<li><a class="reference internal" href="#reading-an-exiting-layout">Reading an exiting Layout</a></li>
<li><a class="reference internal" href="#the-display-options-dictionnary">The display options dictionnary</a><ul>
<li><a class="reference internal" href="#layers">Layers</a></li>
<li><a class="reference internal" href="#strings">Strings</a></li>
<li><a class="reference internal" href="#sizes">Sizes</a></li>
<li><a class="reference internal" href="#booleans">Booleans</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interactive-editor">Interactive editor</a><ul>
<li><a class="reference internal" href="#image-overlay">Image overlay</a></li>
<li><a class="reference internal" href="#scaling-the-figure-overlay">Scaling the figure overlay</a></li>
<li><a class="reference internal" href="#vizualisation-of-the-layout">Vizualisation of the layout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#slabs-and-materials">2.1.3&nbsp;&nbsp;&nbsp;Slabs and Materials</a><ul>
<li><a class="reference internal" href="#defining-a-new-slab-and-a-new-material">2.1.3.1&nbsp;&nbsp;&nbsp;Defining a new Slab and a new Material</a></li>
<li><a class="reference internal" href="#information-necessary-to-define-a-slab">2.1.3.2&nbsp;&nbsp;&nbsp;Information necessary to define a Slab</a></li>
<li><a class="reference internal" href="#evaluation-of-a-slab">2.1.3.3&nbsp;&nbsp;&nbsp;Evaluation of a Slab</a></li>
<li><a class="reference internal" href="#transmission-and-reflexion-coefficients">2.1.3.4&nbsp;&nbsp;&nbsp;Transmission and Reflexion coefficients</a><ul>
<li><a class="reference internal" href="#ploting-reflection-and-transmission-coefficients">Ploting Reflection and Transmission Coefficients</a></li>
</ul>
</li>
<li><a class="reference internal" href="#evaluation-without-phase-compensation">2.1.3.5&nbsp;&nbsp;&nbsp;Evaluation without phase compensation</a></li>
<li><a class="reference internal" href="#references">2.1.3.6&nbsp;&nbsp;&nbsp;References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#effect-of-modyfiying-the-nature-of-sub-segments">2.1.4&nbsp;&nbsp;&nbsp;Effect of Modyfiying the Nature of Sub-Segments</a><ul>
<li><a class="reference internal" href="#the-different-members-of-the-link-are">2.1.4.1&nbsp;&nbsp;&nbsp;The different members of the link are</a></li>
</ul>
</li>
<li><a class="reference internal" href="#outdoor">2.1.5&nbsp;&nbsp;&nbsp;Outdoor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#description-of-antennas">2.2&nbsp;&nbsp;&nbsp;Description of Antennas</a></li>
<li><a class="reference internal" href="#multiwall-motley-keenan-simulation">2.3&nbsp;&nbsp;&nbsp;Multiwall Motley-Keenan Simulation</a></li>
<li><a class="reference internal" href="#ray-tracing-tool">2.4&nbsp;&nbsp;&nbsp;Ray Tracing Tool</a></li>
</ul>
</li>
<li><a class="reference internal" href="#handling-agent-mobility">3&nbsp;&nbsp;&nbsp;Handling Agent Mobility</a></li>
<li><a class="reference internal" href="#wireless-body-area-network-related-classes">4&nbsp;&nbsp;&nbsp;Wireless Body Area Network Related Classes</a></li>
<li><a class="reference internal" href="#some-simulation-examples">5&nbsp;&nbsp;&nbsp;Some Simulation Examples</a></li>
<li><a class="reference internal" href="#pylayers-tools">6&nbsp;&nbsp;&nbsp;PyLayers Tools</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">&lt;no title&gt;</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="1-GIS/Ezone.html"
                        title="next chapter">1. Geographical Information and the Earth Zone class : <tt class="docutils literal"><span class="pre">Ezone</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/./TOC.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <style>
    @font-face {
        font-family: "Computer Modern";
        src: url('http://mirrors.ctan.org/fonts/cm-unicode/fonts/otf/cmunss.otf');
    }
    div.cell{
        width:800px;
        margin-left:16% !important;
        margin-right:auto;
    }
    h1 {
        font-family: Helvetica, serif;
    }
    h4{
        margin-top:12px;
        margin-bottom: 3px;
       }
    div.text_cell_render{
        font-family: Computer Modern, "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;
        line-height: 145%;
        font-size: 130%;
        width:800px;
        margin-left:auto;
        margin-right:auto;
    }
    .CodeMirror{
            font-family: "Source Code Pro", source-code-pro,Consolas, monospace;
    }
    .prompt{
        display: None;
    }
    .text_cell_render h5 {
        font-weight: 300;
        font-size: 22pt;
        color: #4057A1;
        font-style: italic;
        margin-bottom: .5em;
        margin-top: 0.5em;
        display: block;
    }

    .warning{
        color: rgb( 240, 20, 20 )
        }
</style>
<script>
    MathJax.Hub.Config({
                        TeX: {
                           extensions: ["AMSmath.js"]
                           },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
                },
                displayAlign: 'center', // Change this to 'center' to center equations.
                "HTML-CSS": {
                    styles: {'.MathJax_Display': {"margin": 4}}
                }
        });
</script><div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><a class="reference internal" href="#overview" id="id1">1&nbsp;&nbsp;&nbsp;Overview</a></li>
<li><a class="reference internal" href="#radio-propagation-simulation" id="id2">2&nbsp;&nbsp;&nbsp;Radio Propagation Simulation</a><ul class="auto-toc">
<li><a class="reference internal" href="#environement-description" id="id3">2.1&nbsp;&nbsp;&nbsp;Environement Description</a><ul class="auto-toc">
<li><a class="reference internal" href="#indoor" id="id4">2.1.1&nbsp;&nbsp;&nbsp;Indoor</a><ul class="auto-toc">
<li><a class="reference internal" href="#layout-description-and-edition" id="id5">2.1.1.1&nbsp;&nbsp;&nbsp;Layout Description and Edition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#description-of-the-propagation-environment" id="id6">2.1.2&nbsp;&nbsp;&nbsp;Description of the propagation environment</a><ul class="auto-toc">
<li><a class="reference internal" href="#getting-the-list-of-all-available-layouts-the-ls-method" id="id7">2.1.2.1&nbsp;&nbsp;&nbsp;Getting the list of all available Layouts : the <tt class="docutils literal"><span class="pre">ls()</span></tt> method</a></li>
<li><a class="reference internal" href="#the-useful-numpy-arrays-of-the-layout" id="id8">2.1.2.2&nbsp;&nbsp;&nbsp;The useful numpy arrays of the Layout</a></li>
<li><a class="reference internal" href="#tgs-trancodage-from-graph-indexing-to-numpy-array-indexing" id="id9">2.1.2.3&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">tgs</span></tt> : trancodage from graph indexing to numpy array indexing</a></li>
<li><a class="reference internal" href="#layout-seg2pts-a-function-for-getting-points-coordinates-from-segment-number-array" id="id10">2.1.2.4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">Layout.seg2pts</span></tt> a function for getting points coordinates from segment number array</a></li>
<li><a class="reference internal" href="#the-layout-class" id="id11">2.1.2.5&nbsp;&nbsp;&nbsp;The Layout class</a></li>
</ul>
</li>
<li><a class="reference internal" href="#slabs-and-materials" id="id12">2.1.3&nbsp;&nbsp;&nbsp;Slabs and Materials</a><ul class="auto-toc">
<li><a class="reference internal" href="#defining-a-new-slab-and-a-new-material" id="id13">2.1.3.1&nbsp;&nbsp;&nbsp;Defining a new Slab and a new Material</a></li>
<li><a class="reference internal" href="#information-necessary-to-define-a-slab" id="id14">2.1.3.2&nbsp;&nbsp;&nbsp;Information necessary to define a Slab</a></li>
<li><a class="reference internal" href="#evaluation-of-a-slab" id="id15">2.1.3.3&nbsp;&nbsp;&nbsp;Evaluation of a Slab</a></li>
<li><a class="reference internal" href="#transmission-and-reflexion-coefficients" id="id16">2.1.3.4&nbsp;&nbsp;&nbsp;Transmission and Reflexion coefficients</a></li>
<li><a class="reference internal" href="#evaluation-without-phase-compensation" id="id17">2.1.3.5&nbsp;&nbsp;&nbsp;Evaluation without phase compensation</a></li>
<li><a class="reference internal" href="#references" id="id18">2.1.3.6&nbsp;&nbsp;&nbsp;References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#effect-of-modyfiying-the-nature-of-sub-segments" id="id19">2.1.4&nbsp;&nbsp;&nbsp;Effect of Modyfiying the Nature of Sub-Segments</a><ul class="auto-toc">
<li><a class="reference internal" href="#the-different-members-of-the-link-are" id="id20">2.1.4.1&nbsp;&nbsp;&nbsp;The different members of the link are</a></li>
</ul>
</li>
<li><a class="reference internal" href="#outdoor" id="id21">2.1.5&nbsp;&nbsp;&nbsp;Outdoor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#description-of-antennas" id="id22">2.2&nbsp;&nbsp;&nbsp;Description of Antennas</a></li>
<li><a class="reference internal" href="#multiwall-motley-keenan-simulation" id="id23">2.3&nbsp;&nbsp;&nbsp;Multiwall Motley-Keenan Simulation</a></li>
<li><a class="reference internal" href="#ray-tracing-tool" id="id24">2.4&nbsp;&nbsp;&nbsp;Ray Tracing Tool</a></li>
</ul>
</li>
<li><a class="reference internal" href="#handling-agent-mobility" id="id25">3&nbsp;&nbsp;&nbsp;Handling Agent Mobility</a></li>
<li><a class="reference internal" href="#wireless-body-area-network-related-classes" id="id26">4&nbsp;&nbsp;&nbsp;Wireless Body Area Network Related Classes</a></li>
<li><a class="reference internal" href="#some-simulation-examples" id="id27">5&nbsp;&nbsp;&nbsp;Some Simulation Examples</a></li>
<li><a class="reference internal" href="#pylayers-tools" id="id28">6&nbsp;&nbsp;&nbsp;PyLayers Tools</a></li>
</ul>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1">1&nbsp;&nbsp;&nbsp;Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Pylayers is a site-specific radio channel simulator.
It is organized in different python classes and functions.
The basic usage is first to build a description of the radio propagation
scene. This means :</p>
<ol class="arabic simple">
<li>Describing a propagation environement</li>
<li>Setting a Transmitter and a Receiver and a given standard.</li>
<li>Producing Output for Upper Layer simulation or analysis.</li>
</ol>
<p>There are mostly two kind of situation. Indoor environement situation and
outdoor situation. For now Pylayers handles only indoor scenario.
Outdoor and Indoor/Outdoor propagation model will be gradually added.</p>
</div>
<div class="section" id="radio-propagation-simulation">
<h1><a class="toc-backref" href="#id2">2&nbsp;&nbsp;&nbsp;Radio Propagation Simulation</a><a class="headerlink" href="#radio-propagation-simulation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="environement-description">
<h2><a class="toc-backref" href="#id3">2.1&nbsp;&nbsp;&nbsp;Environement Description</a><a class="headerlink" href="#environement-description" title="Permalink to this headline">¶</a></h2>
<div class="section" id="indoor">
<h3><a class="toc-backref" href="#id4">2.1.1&nbsp;&nbsp;&nbsp;Indoor</a><a class="headerlink" href="#indoor" title="Permalink to this headline">¶</a></h3>
<div class="section" id="layout-description-and-edition">
<h4><a class="toc-backref" href="#id5">2.1.1.1&nbsp;&nbsp;&nbsp;Layout Description and Edition</a><a class="headerlink" href="#layout-description-and-edition" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="description-of-the-propagation-environment">
<h3><a class="toc-backref" href="#id6">2.1.2&nbsp;&nbsp;&nbsp;Description of the propagation environment</a><a class="headerlink" href="#description-of-the-propagation-environment" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Layout</span></tt> class contains the data structure for describing an
Indoor environment. It contains data structures necessary for the graph
based ray tracing implemented in PyLayers. The class is implemented in
the
<tt class="docutils literal"><span class="pre">`layout.py</span></tt> &lt;<a class="reference external" href="http://pylayers.github.io/pylayers/modules/pylayers.gis.layout.html">http://pylayers.github.io/pylayers/modules/pylayers.gis.layout.html</a>&gt;`__
module</p>
<div class="code python highlight-python"><div class="highlight"><pre>from pylayers.gis.layout import *
from IPython.display import Image
import os
%matplotlib inline
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>WARNING:traits.has_traits:DEPRECATED: traits.has_traits.wrapped_class, &#39;the &#39;implements&#39; class advisor has been deprecated. Use the &#39;provides&#39; class decorator.
</pre></div>
</div>
<div class="section" id="getting-the-list-of-all-available-layouts-the-ls-method">
<h4><a class="toc-backref" href="#id7">2.1.2.1&nbsp;&nbsp;&nbsp;Getting the list of all available Layouts : the <tt class="docutils literal"><span class="pre">ls()</span></tt> method</a><a class="headerlink" href="#getting-the-list-of-all-available-layouts-the-ls-method" title="Permalink to this headline">¶</a></h4>
<p>To create a default Layout</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">()</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">filename</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;defstr.ini&#39;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">ls()</span></tt> method lists the layout file which are available in the
<tt class="docutils literal"><span class="pre">struc</span></tt> directory of the current project.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s">&#39;ini&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;DLR.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DLR2.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;MADRID-METIS.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;MOCAP-small.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;MOCAP-small2.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;MOCAP.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;MOCAPext.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;TA-Office.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;TA-OfficeAir.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;W2PTIN.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;WHERE1.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;WHERE2.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;d24.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;defstr.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;defstr3.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;homeK_vf.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;klepal.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;nicta.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;scat1.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;scat2.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;scattering.ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;test.ini&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="s">&#39;DLR.ini&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2b702902fe50&gt;,
 &lt;matplotlib.axes.AxesSubplot at 0x2b7028dde750&gt;)
</pre></div>
</div>
<img alt="./Layout_files/Layout_10_1.png" src="./Layout_files/Layout_10_1.png" />
<p>To check which are the used slabs :</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">Slabs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">sla</span><span class="p">)</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">Slabs</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">L</span><span class="o">.</span><span class="n">sl</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">L</span><span class="o">.</span><span class="n">sl</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>3D_WINDOW_GLASS : GLASS | AIR | GLASS | [0.005, 0.005, 0.005]

AIR : AIR | [0.02]

DOOR : WOOD | [0.03]

METAL : METAL | [0.1]

PARTITION : PLASTER | [0.1]

WALL : BRICK | [0.07]
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="s">&#39;WHERE1.ini&#39;</span><span class="p">)</span>
<span class="n">L</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>----------------
WHERE1.ini
----------------

Number of points  : 281
Number of segments  : 357
Number of sub segments  : 71
Number of cycles  : 80
Number of rooms  : 33
degree 0 : [-3]
degree 1 : [-270 -264 -236 -235 -206  -15]
degree 2 : 143
degree 3 : 128
degree 4 : [-211 -177 -171]

xrange :(-28.13, 31.749)
yrange :(4.258, 16.839)

Useful dictionnaries
----------------
dca {cycle : []} cycle with an airwall
sl {slab name : slab dictionary}
name :  {slab :seglist}

Useful arrays
----------------
pt : numpy array of points
normal : numpy array of normal
offset : numpy array of offset
tsg : get segment index in Gs from tahe
isss :  sub-segment index above Nsmax
tgs : get segment index in tahe from Gs
lsss : list of segments with sub-segment
sla : list of all slab names (Nsmax+Nss+1)
degree : degree of nodes
</pre></div>
</div>
<p>This Layout is still in construction</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="n">airwalls</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<img alt="./Layout_files/Layout_15_0.png" src="./Layout_files/Layout_15_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="s">&#39;W2PTIN.ini&#39;</span><span class="p">)</span>
<span class="n">L</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>----------------
W2PTIN.ini
Image(&#39;/home/uguen/Bureau/P1/struc/images/W2PTIN.png&#39;)
----------------

Number of points  : 185
Number of segments  : 236
Number of sub segments  : 11
Number of cycles  : 0
Number of rooms  : 0
degree 0 : [-110 -109 -108 -103]
degree 1 : [-80]
degree 2 : 97
degree 3 : 81
degree 4 : [-127  -87]

xrange :(-7.578, 30.217)
yrange :(-7.642, 30.753)

Useful dictionnaries
----------------
sl {slab name : slab dictionary}
name :  {slab :seglist}

Useful arrays
----------------
pt : numpy array of points
normal : numpy array of normal
offset : numpy array of offset
tsg : get segment index in Gs from tahe
isss :  sub-segment index above Nsmax
tgs : get segment index in tahe from Gs
lsss : list of segments with sub-segment
sla : list of all slab names (Nsmax+Nss+1)
degree : degree of nodes
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2b7029326610&gt;,
 &lt;matplotlib.axes.AxesSubplot at 0x2b7029334450&gt;)
</pre></div>
</div>
<img alt="./Layout_files/Layout_17_1.png" src="./Layout_files/Layout_17_1.png" />
</div>
<div class="section" id="the-useful-numpy-arrays-of-the-layout">
<h4><a class="toc-backref" href="#id8">2.1.2.2&nbsp;&nbsp;&nbsp;The useful numpy arrays of the Layout</a><a class="headerlink" href="#the-useful-numpy-arrays-of-the-layout" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>tsg : get segment index in Gs from tahe</li>
<li>isss : sub-segment index above Nsmax</li>
<li>tgs : get segment index in tahe from Gs</li>
<li>lsss : list of segments with sub-segment</li>
<li>sla : list of all slab names (Nsmax+Nss+1)</li>
<li>degree : degree of nodes</li>
</ul>
<div class="section" id="pt-the-array-of-points">
<h5><tt class="docutils literal"><span class="pre">pt</span></tt> the array of points<a class="headerlink" href="#pt-the-array-of-points" title="Permalink to this headline">¶</a></h5>
<p>point coordinates are stored in two places :</p>
<div class="highlight-python"><div class="highlight"><pre>L.Gs.pos : in a dictionnary form (key is the point negative index)
L.pt : in a numpy array
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">pt</span><span class="p">)</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">pos</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">185</span><span class="p">)</span>
<span class="mi">185</span>
</pre></div>
</div>
<p>This dual storage is chosen (temporarily ? ) for computational
efficiency reason. The priority goes to the graph and the numpy array is
calculated at the end of the edition in the <tt class="docutils literal"><span class="pre">Layout.g2npy</span></tt> method
(graph to numpy) which is in charge of the conversion.</p>
</div>
<div class="section" id="tahe-tail-head">
<h5>tahe (tail-head)<a class="headerlink" href="#tahe-tail-head" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">tahe</span></tt> is a <img class="math" src="../_images/math/77d0fe9b1043354dbc8847094426fa1e856dd778.png" alt="(2\times N_{s})"/> where <img class="math" src="../_images/math/f9b03df42cc4eecc1f289434c88139073ffd3847.png" alt="N_s"/> denotes the
number of segment. The first line is the tail index of the segment
<img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/> and the second line is the head of the segment <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/>.
Where <img class="math" src="../_images/math/e9203da50e1059455123460d4e716c9c7f440cc3.png" alt="k"/> is the index of a given segment (starting in 0).</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">Gc</span><span class="p">,</span><span class="n">L</span><span class="o">.</span><span class="n">Gc</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./Layout_files/Layout_28_0.png" src="./Layout_files/Layout_28_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">Gi</span><span class="p">,</span><span class="n">L</span><span class="o">.</span><span class="n">Gi</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span><span class="n">node_color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span><span class="n">node_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">Gi</span><span class="p">,</span><span class="n">L</span><span class="o">.</span><span class="n">Gi</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span><span class="n">node_color</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span><span class="n">node_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;matplotlib.collections.LineCollection at 0x2b702c40d710&gt;
</pre></div>
</div>
<img alt="./Layout_files/Layout_29_1.png" src="./Layout_files/Layout_29_1.png" />
</div>
</div>
<div class="section" id="tgs-trancodage-from-graph-indexing-to-numpy-array-indexing">
<h4><a class="toc-backref" href="#id9">2.1.2.3&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">tgs</span></tt> : trancodage from graph indexing to numpy array indexing</a><a class="headerlink" href="#tgs-trancodage-from-graph-indexing-to-numpy-array-indexing" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">tgs</span></tt> is an arry with length <img class="math" src="../_images/math/f9b03df42cc4eecc1f289434c88139073ffd3847.png" alt="N_s"/>+1. The index 0 is not used
because none segment has 0 as an index.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">ns</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">utahe</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">tgs</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">tahe</span> <span class="o">=</span>  <span class="n">L</span><span class="o">.</span><span class="n">tahe</span><span class="p">[:,</span><span class="n">utahe</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">ptail</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">pt</span><span class="p">[:,</span><span class="n">tahe</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
<span class="n">phead</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">pt</span><span class="p">[:,</span><span class="n">tahe</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">ptail</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>[ 29.785   6.822]
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">phead</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>[ 27.414   6.822]
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">139</span><span class="p">],</span>
 <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;PARTITION&#39;</span><span class="p">,</span>
 <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
 <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]),</span>
 <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)}</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">]</span>
<span class="k">print</span> <span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="o">-</span><span class="mi">139</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mf">29.785</span><span class="p">,</span> <span class="mf">6.822</span><span class="p">)</span>
<span class="p">(</span><span class="mf">27.414</span><span class="p">,</span> <span class="mf">6.822</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">aseg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">134</span><span class="p">])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">aseg</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mi">3</span><span class="p">,)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span>  <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">tahe</span><span class="p">[:,</span><span class="n">L</span><span class="o">.</span><span class="n">tgs</span><span class="p">[</span><span class="n">aseg</span><span class="p">]][</span><span class="mi">0</span><span class="p">,:]</span>
<span class="n">ph</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">tahe</span><span class="p">[:,</span><span class="n">L</span><span class="o">.</span><span class="n">tgs</span><span class="p">[</span><span class="n">aseg</span><span class="p">]][</span><span class="mi">1</span><span class="p">,:]</span>
<span class="n">pth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">pt</span><span class="p">,</span><span class="n">ph</span><span class="p">))</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">pth</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="layout-seg2pts-a-function-for-getting-points-coordinates-from-segment-number-array">
<h4><a class="toc-backref" href="#id10">2.1.2.4&nbsp;&nbsp;&nbsp;<tt class="docutils literal"><span class="pre">Layout.seg2pts</span></tt> a function for getting points coordinates from segment number array</a><a class="headerlink" href="#layout-seg2pts-a-function-for-getting-points-coordinates-from-segment-number-array" title="Permalink to this headline">¶</a></h4>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">seg2pts</span><span class="p">(</span><span class="n">aseg</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">array</span><span class="p">([[</span> <span class="mf">29.785</span><span class="p">,</span>  <span class="o">-</span><span class="mf">3.754</span><span class="p">,</span>  <span class="mf">22.538</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">6.822</span><span class="p">,</span>  <span class="mf">23.078</span><span class="p">,</span>   <span class="mf">8.711</span><span class="p">],</span>
       <span class="p">[</span> <span class="mf">29.785</span><span class="p">,</span>   <span class="mf">0.044</span><span class="p">,</span>  <span class="mf">20.326</span><span class="p">],</span>
       <span class="p">[</span>  <span class="mf">8.921</span><span class="p">,</span>  <span class="mf">23.078</span><span class="p">,</span>   <span class="mf">8.693</span><span class="p">]])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">aseg</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">nodes</span><span class="p">()))</span>
<span class="n">pth</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">seg2pts</span><span class="p">(</span><span class="n">aseg</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pylayers.util.plotutil</span> <span class="kn">import</span> <span class="n">displot</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">displot</span><span class="p">(</span><span class="n">pth</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">,:],</span><span class="n">pth</span><span class="p">[</span><span class="mi">2</span><span class="p">:,:])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./Layout_files/Layout_47_1.png" src="./Layout_files/Layout_47_1.png" />
</div>
<div class="section" id="the-layout-class">
<h4><a class="toc-backref" href="#id11">2.1.2.5&nbsp;&nbsp;&nbsp;The Layout class</a><a class="headerlink" href="#the-layout-class" title="Permalink to this headline">¶</a></h4>
<div class="section" id="introduction">
<h5>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h5>
<p>This section explains the main features of the <strong>Layout</strong> class.</p>
<p>A Layout is a representation of a floorplan, it is handled by the module
<strong>pylayers.gis.layout</strong>.</p>
<p>This module recognizes different file formats including geo-referenced
files in open street map format <tt class="docutils literal"><span class="pre">.osm</span></tt>.</p>
<p>Using osm allows to take advantage of a mature floor plan editor <em>JOSM</em>
with the plugin <em>PicLayer</em>. This is well described in
<a class="reference external" href="http://wiki.openstreetmap.org/wiki/IndoorOSM">http://wiki.openstreetmap.org/wiki/IndoorOSM</a></p>
<p>The <tt class="docutils literal"><span class="pre">pylayers.gis.osmparser</span></tt> module parses <tt class="docutils literal"><span class="pre">osm</span></tt> files.</p>
<p>See the following methods of the layout object</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">loadosm()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">saveosm()</span></tt></li>
</ul>
</div>
<div class="section" id="structure-of-a-layout">
<h5>Structure of a Layout<a class="headerlink" href="#structure-of-a-layout" title="Permalink to this headline">¶</a></h5>
<p>At first a Layout is described by a set of points (negative index) and a
set of segments (positive index).</p>
<p>Points and segments are nodes of the <img class="math" src="../_images/math/9d358e50c5697373ad7cc566b95dfe19d68e9d20.png" alt="\mathcal{G}_s"/> graph.</p>
<p>It is required to respect a strict non overlapping rule. <strong>No segments
can recover partially or totally an other segment</strong>.</p>
<p>This rule allows to capture topological relations of the network which
are exploited for further analysis.</p>
</div>
<div class="section" id="subsegments">
<h5>Subsegments<a class="headerlink" href="#subsegments" title="Permalink to this headline">¶</a></h5>
<p>To describe doors and windows, the concept of <tt class="docutils literal"><span class="pre">subsegment</span></tt> is
introduced.</p>
<p>A <tt class="docutils literal"><span class="pre">segment</span></tt> has attributes :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> : slab name</li>
<li><tt class="docutils literal"><span class="pre">z</span></tt> : tuple of minimum and maximum heights with respect to ground
(meters)</li>
<li><tt class="docutils literal"><span class="pre">transition</span></tt> : a boolean indicating if a human can cross this
segment. For example, segments associated with a door are transition
segments but we will see later that it may be judicious to split
space with transparent segments which have the name &#8216;AIR&#8217;. Those
segments are also <tt class="docutils literal"><span class="pre">transition=True</span></tt></li>
</ul>
<p>A <tt class="docutils literal"><span class="pre">subsegment</span></tt> belongs to a <tt class="docutils literal"><span class="pre">segment</span></tt>, it has mainly 2 attached
parameters :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ss_name</span></tt> : subsegment slab name</li>
<li><tt class="docutils literal"><span class="pre">ss_z</span></tt> : [(zmin1,zmax1),(zmin2,zmax2),...,(zminK,zmaxK))] list of
minimum and maximum height of associated subsegments (meters)</li>
</ul>
<p>When appearing in a 3D ray a subsegment should have a unique index
different from the segment index.</p>
</div>
<div class="section" id="the-different-layout-format">
<h5>The different layout format<a class="headerlink" href="#the-different-layout-format" title="Permalink to this headline">¶</a></h5>
<p>The layout format has regularly evolved over time and is going to evolve
again. Currently, the different recognized file extensions are the
following :</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">.str2</span></tt>: a ASCII file (Node list + edge list)</li>
<li><tt class="docutils literal"><span class="pre">.str</span></tt> : a binary file which includes visibility relations between
point and segments</li>
<li><tt class="docutils literal"><span class="pre">.ini</span></tt> : an ini file which gather node list and edge list as well
as the state of the current <tt class="docutils literal"><span class="pre">display</span></tt> dictionnary</li>
<li><tt class="docutils literal"><span class="pre">.osm</span></tt> : an xml file which can be edited with
<a class="reference external" href="http://josm.openstreetmap.de/">JOSM</a></li>
</ul>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pylayers.gis.layout</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pylayers.util.project</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>WARNING:traits.has_traits:DEPRECATED: traits.has_traits.wrapped_class, &#39;the &#39;implements&#39; class advisor has been deprecated. Use the &#39;provides&#39; class decorator.
</pre></div>
</div>
</div>
<div class="section" id="reading-an-exiting-layout">
<h5>Reading an exiting Layout<a class="headerlink" href="#reading-an-exiting-layout" title="Permalink to this headline">¶</a></h5>
<p>To read an existing layout it is sufficient to create a Layout object
with, as an argument, a file name with one of the recognized extension.
All files are stored in the <tt class="docutils literal"><span class="pre">pstruc['DIRSTRUC']</span></tt> directory of the
project. The project root directory is defined in the <tt class="docutils literal"><span class="pre">$BASENAME</span></tt>
environment variable.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span> <span class="n">pstruc</span><span class="p">[</span><span class="s">&#39;DIRSTRUC&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">struc</span><span class="o">/</span><span class="nb">str</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">pstruc</span></tt> is a dictionnary which gathers all directories which are used
in <tt class="docutils literal"><span class="pre">PyLayers</span></tt></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pstruc</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&#39;DIRANT&#39;</span><span class="p">:</span> <span class="s">&#39;ant&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRBODY&#39;</span><span class="p">:</span> <span class="s">&#39;body&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRC3D&#39;</span><span class="p">:</span> <span class="s">&#39;body/c3d&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRCIR&#39;</span><span class="p">:</span> <span class="s">&#39;output&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRCT&#39;</span><span class="p">:</span> <span class="s">&#39;output/Ct&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRFUR&#39;</span><span class="p">:</span> <span class="s">&#39;struc/furnitures&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRGEOM&#39;</span><span class="p">:</span> <span class="s">&#39;geom&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRGIS&#39;</span><span class="p">:</span> <span class="s">&#39;gis&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRH&#39;</span><span class="p">:</span> <span class="s">&#39;output/H&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRIMAGE&#39;</span><span class="p">:</span> <span class="s">&#39;struc/images&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRINI&#39;</span><span class="p">:</span> <span class="s">&#39;struc/ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRLCH&#39;</span><span class="p">:</span> <span class="s">&#39;output&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRLNK&#39;</span><span class="p">:</span> <span class="s">&#39;output&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRMAT&#39;</span><span class="p">:</span> <span class="s">&#39;ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRMAT2&#39;</span><span class="p">:</span> <span class="s">&#39;ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRMES&#39;</span><span class="p">:</span> <span class="s">&#39;meas&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRNETSAVE&#39;</span><span class="p">:</span> <span class="s">&#39;netsave&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIROOSM&#39;</span><span class="p">:</span> <span class="s">&#39;gis/osm&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIROSM&#39;</span><span class="p">:</span> <span class="s">&#39;struc/osm&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRPICKLE&#39;</span><span class="p">:</span> <span class="s">&#39;struc/gpickle&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRR2D&#39;</span><span class="p">:</span> <span class="s">&#39;output/r2d&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRR3D&#39;</span><span class="p">:</span> <span class="s">&#39;output/r3d&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSIG&#39;</span><span class="p">:</span> <span class="s">&#39;output/sig&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSIMUL&#39;</span><span class="p">:</span> <span class="s">&#39;ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSLAB&#39;</span><span class="p">:</span> <span class="s">&#39;ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSLAB2&#39;</span><span class="p">:</span> <span class="s">&#39;ini&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSTRUC&#39;</span><span class="p">:</span> <span class="s">&#39;struc/str&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRSTRUC2&#39;</span><span class="p">:</span> <span class="s">&#39;struc/str&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRTRA&#39;</span><span class="p">:</span> <span class="s">&#39;output&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRTUD&#39;</span><span class="p">:</span> <span class="s">&#39;output&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRTx&#39;</span><span class="p">:</span> <span class="s">&#39;output/Tx001&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRWEAR&#39;</span><span class="p">:</span> <span class="s">&#39;body/wear&#39;</span><span class="p">,</span>
 <span class="s">&#39;DIRWRL&#39;</span><span class="p">:</span> <span class="s">&#39;struc/wrl&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The structure of the <tt class="docutils literal"><span class="pre">.osm</span></tt> file is shown below</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash

    cd $BASENAME/struc
    ls *.osm
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DLR</span><span class="o">.</span><span class="n">osm</span>
<span class="n">MOCAP2</span><span class="o">.</span><span class="n">osm</span>
<span class="n">MOCAP3</span><span class="o">.</span><span class="n">osm</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
    cd $BASENAME/struc
    head DLR.osm
    echo &#39;---&#39;
    tail -17 DLR.osm
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;
&lt;osm version=&#39;0.6&#39; upload=&#39;false&#39; generator=&#39;PyLayers&#39;&gt;
&lt;node id=&#39;-212&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0100855114&#39; lon=&#39;-1.98980710934&#39; /&gt;
&lt;node id=&#39;-210&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0100789151&#39; lon=&#39;-1.9897910381&#39; /&gt;
&lt;node id=&#39;-208&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0100738861&#39; lon=&#39;-1.98977878545&#39; /&gt;
&lt;node id=&#39;-206&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0100616861&#39; lon=&#39;-1.98982814281&#39; /&gt;
&lt;node id=&#39;-204&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0101583649&#39; lon=&#39;-1.98982436917&#39; /&gt;
&lt;node id=&#39;-202&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0101656174&#39; lon=&#39;-1.98981796656&#39; /&gt;
&lt;node id=&#39;-200&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0101843662&#39; lon=&#39;-1.98977935424&#39; /&gt;
&lt;node id=&#39;-198&#39; action=&#39;modify&#39; visible=&#39;true&#39; lat=&#39;47.0101791636&#39; lon=&#39;-1.98982426816&#39; /&gt;
---
&lt;tag k=&#39;transition&#39; v=&#39;False&#39; /&gt;
&lt;/way&gt;
&lt;way id=&#39;-10000123&#39; action=&#39;modify&#39; visible=&#39;true&#39;&gt;
&lt;nd ref=&#39;-200&#39; /&gt;
&lt;nd ref=&#39;-100&#39; /&gt;
&lt;tag k=&#39;name&#39; v=&#39;WALL&#39; /&gt;
&lt;tag k=&#39;z&#39; v=&quot;(&#39;0.0&#39;, &#39;3.0&#39;)&quot; /&gt;
&lt;tag k=&#39;transition&#39; v=&#39;False&#39; /&gt;
&lt;/way&gt;
&lt;way id=&#39;-10000124&#39; action=&#39;modify&#39; visible=&#39;true&#39;&gt;
&lt;nd ref=&#39;-166&#39; /&gt;
&lt;nd ref=&#39;-188&#39; /&gt;
&lt;tag k=&#39;name&#39; v=&#39;WALL&#39; /&gt;
&lt;tag k=&#39;z&#39; v=&quot;(&#39;0.0&#39;, &#39;3.0&#39;)&quot; /&gt;
&lt;tag k=&#39;transition&#39; v=&#39;False&#39; /&gt;
&lt;/way&gt;
&lt;/osm&gt;
</pre></div>
</div>
<p>To read a new layout in osm format :</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="s">&#39;DLR.ini&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showGs</span><span class="p">()</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>filestr :  DLR.ini
filematini :  matDB.ini
fileslabini :  slabDB.ini
filegeom :  DLR.off
boundaries  (-0.505, 32.586, -8.277, 8.878)
number of Points : 105
number of Segments : 124
number of Sub-Segments : 30
Gs Nodes :  229
Gs Edges :  248
Gt Nodes :  0
Gt Edges :  0
vnodes = Gt.node[Nc][&#39;cycles&#39;].cycle
poly = Gt.node[Nc][&#39;cycle&#39;].polyg
Gr Nodes    : 0
Gr Edges    : 0
Nc  = Gr.node[nroom][&#39;cycles&#39;]
</pre></div>
</div>
<p>The different graphs associated with the layout are then built</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
<p>The topological graph <img class="math" src="../_images/math/81225d898fa4a260a2c7eb990cc0e37b3d34ab5f.png" alt="\mathcal{G}_t"/> or graph of non overlapping
cycles.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The graph of room <img class="math" src="../_images/math/7adf94bbad41196d6e46a083c8fa572339f33f2f.png" alt="\mathcal{G}_r"/>. Two rooms which share at least
a wall are connected. Two rooms which share only a corner (punctual
connection) are not connected</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The graph of waypath <img class="math" src="../_images/math/a7abe4ad210aa755e26fe5019ee06b8dee65bd62.png" alt="\mathcal{G}_w"/>. This graph is used for agent
mobility. This allows to determine the shortest path between 2 rooms.
This information could be included in the osm file. This is not the case
yet</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The graph of visibility <img class="math" src="../_images/math/2019da1c9a58643ae395b7177603bf14a9346d5a.png" alt="\mathcal{G_v}"/></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The graph of interactions <img class="math" src="../_images/math/f73bdbe32e898c36e2a3ccbdc51d8cd1798861e9.png" alt="\mathcal{G}_i"/> used to determine the
ray signatures.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;i&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">f</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">a</span><span class="p">)</span>
<span class="n">b</span><span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-display-options-dictionnary">
<h5>The display options dictionnary<a class="headerlink" href="#the-display-options-dictionnary" title="Permalink to this headline">¶</a></h5>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>filestr :  DLR.ini
filematini :  matDB.ini
fileslabini :  slabDB.ini
filegeom :  DLR.off
boundaries  (-0.505, 32.586, -8.277, 8.878)
number of Points : 105
number of Segments : 124
number of Sub-Segments : 30
Gs Nodes :  229
Gs Edges :  248
Gt Nodes :  21
Gt Edges :  52
vnodes = Gt.node[Nc][&#39;cycles&#39;].cycle
poly = Gt.node[Nc][&#39;cycle&#39;].polyg
Gr Nodes    : 18
Gr Edges    : 18
Nc  = Gr.node[nroom][&#39;cycles&#39;]
</pre></div>
</div>
<p>The layout can be displayed using matplotlib ploting primitive. Several
display options are specified in the display dictionnary. Those options
are exploited in <tt class="docutils literal"><span class="pre">showGs()</span></tt> vizualisation method.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">display</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&#39;activelayer&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
 <span class="s">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
 <span class="s">&#39;box&#39;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.505</span><span class="p">,</span> <span class="mf">32.586</span><span class="p">,</span> <span class="o">-</span><span class="mf">8.277</span><span class="p">,</span> <span class="mf">8.878</span><span class="p">),</span>
 <span class="s">&#39;clear&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;edges&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;edlabel&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;edlblsize&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
 <span class="s">&#39;ednodes&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;fileoverlay&#39;</span><span class="p">:</span> <span class="s">&#39;DLR4991.png&#39;</span><span class="p">,</span>
 <span class="s">&#39;fontsize&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="s">&#39;inverse&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;layer&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">&#39;layers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;WALL&#39;</span><span class="p">,</span> <span class="s">&#39;PARTITION&#39;</span><span class="p">,</span> <span class="s">&#39;AIR&#39;</span><span class="p">,</span> <span class="s">&#39;WINDOW_GLASS&#39;</span><span class="p">,</span> <span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">],</span>
 <span class="s">&#39;layerset&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;WINDOW_GLASS&#39;</span><span class="p">,</span>
  <span class="s">&#39;PLASTERBOARD_7CM&#39;</span><span class="p">,</span>
  <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;AIR&#39;</span><span class="p">,</span>
  <span class="s">&#39;WINDOW&#39;</span><span class="p">,</span>
  <span class="s">&#39;METALIC&#39;</span><span class="p">,</span>
  <span class="s">&#39;PLASTERBOARD_14CM&#39;</span><span class="p">,</span>
  <span class="s">&#39;DOOR&#39;</span><span class="p">,</span>
  <span class="s">&#39;FLOOR&#39;</span><span class="p">,</span>
  <span class="s">&#39;METAL&#39;</span><span class="p">,</span>
  <span class="s">&#39;PARTITION&#39;</span><span class="p">,</span>
  <span class="s">&#39;CONCRETE_20CM3D&#39;</span><span class="p">,</span>
  <span class="s">&#39;PLASTERBOARD_10CM&#39;</span><span class="p">,</span>
  <span class="s">&#39;CEIL&#39;</span><span class="p">,</span>
  <span class="s">&#39;CONCRETE_6CM3D&#39;</span><span class="p">,</span>
  <span class="s">&#39;CONCRETE_15CM3D&#39;</span><span class="p">,</span>
  <span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">,</span>
  <span class="s">&#39;WALLS&#39;</span><span class="p">,</span>
  <span class="s">&#39;WOOD&#39;</span><span class="p">,</span>
  <span class="s">&#39;CONCRETE_7CM3D&#39;</span><span class="p">,</span>
  <span class="s">&#39;PILLAR&#39;</span><span class="p">,</span>
  <span class="s">&#39;ABSORBENT&#39;</span><span class="p">],</span>
 <span class="s">&#39;ndlabel&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;ndlblsize&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
 <span class="s">&#39;ndsize&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
 <span class="s">&#39;nodes&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;overlay&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;scaled&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;subseg&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;subsegnb&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;thin&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">&#39;ticksoff&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="s">&#39;Init&#39;</span><span class="p">,</span>
 <span class="s">&#39;visu&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="layers">
<h6>Layers<a class="headerlink" href="#layers" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li>&#8216;layer&#8217; : list , []</li>
<li>&#8216;layerset&#8217;,list, list of available layers</li>
<li>&#8216;layers&#8217;, list , []</li>
<li>&#8216;activelayer&#8217;, str , &#8216;WINDOW_GLASS&#8217;</li>
<li>&#8216;alpha&#8217;, float , 0.5 , overlay transparency</li>
<li>&#8216;box&#8217;, tuple , (-20,20,-10,10), (xmin xmax,ymin,ymax)</li>
</ul>
</div>
<div class="section" id="strings">
<h6>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li>&#8216;title&#8217; : str , &#8216;Init&#8217;</li>
<li>&#8216;fileoverlay&#8217; : str , &#8216;TA-Office.png&#8217;</li>
</ul>
</div>
<div class="section" id="sizes">
<h6>Sizes<a class="headerlink" href="#sizes" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li>&#8216;fontsize&#8217;, float , 10</li>
<li>&#8216;ndsize&#8217;, float , 10</li>
<li>&#8216;ndlblsize&#8217; : float 20</li>
<li>&#8216;edlblsize&#8217; : float , 20</li>
</ul>
</div>
<div class="section" id="booleans">
<h6>Booleans<a class="headerlink" href="#booleans" title="Permalink to this headline">¶</a></h6>
<ul class="simple">
<li>&#8216;edlabel&#8217;, boolean, False</li>
<li>&#8216;ticksoff&#8217;,boolean, True</li>
<li>&#8216;scaled&#8217; : boolean , True</li>
<li>&#8216;subseg&#8217; : boolean , True</li>
<li>&#8216;nodes&#8217;, boolean , True</li>
<li>&#8216;visu&#8217;, boolean , False</li>
<li>&#8216;edges&#8217;, boolean , True</li>
<li>&#8216;clear&#8217;, boolean, False</li>
<li>&#8216;overlay&#8217;, boolean , False</li>
<li>&#8216;thin&#8217;, boolean , False , If True trace all segments with thickness 1</li>
<li>&#8216;ndlabel&#8217;,boolean, If True display node labels</li>
<li>&#8216;ednodes&#8217;, boolean, True</li>
</ul>
</div>
</div>
<div class="section" id="interactive-editor">
<h5>Interactive editor<a class="headerlink" href="#interactive-editor" title="Permalink to this headline">¶</a></h5>
<p>The command L.editor() launches an interactive editor. The state machine
is implemented in module <tt class="docutils literal"><span class="pre">pylayers.gis.selectl.py</span></tt>.</p>
<p>To have an idea of all available options, look in the
<tt class="docutils literal"><span class="pre">`pylayers.gis.SelectL</span></tt> &lt;<a class="reference external" href="http://pylayers.github.io/pylayers/_modules/pylayers/gis/selectl.html#SelectL.new_state">http://pylayers.github.io/pylayers/_modules/pylayers/gis/selectl.html#SelectL.new_state</a>&gt;`__
module</p>
<p>All bug correction and ergonomic improvement of this editor is welcome.
Just pull request your modifications.</p>
<p>PyLayers comes along with a low level structure editor based on
<tt class="docutils literal"><span class="pre">matplotlib</span></tt> which can be invoqued using the <tt class="docutils literal"><span class="pre">editor()</span></tt> method. This
editor is more suited for modyfing constitutive properties of walls. In
the future a dedicated plugin in <tt class="docutils literal"><span class="pre">JOSM</span></tt> could be a much better
solution.</p>
<p>There are two different modes of edition</p>
<ul class="simple">
<li>A create points mode CP</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>+ left clic   : free point
+ right clic  : same x point
+ center clic : same y point
</pre></div>
</div>
<ul class="simple">
<li>A create segments mode<ul>
<li>left clic : select point 1</li>
<li>left clic : select point 2</li>
<li>left clic : create a segment between point 1 and point 2</li>
</ul>
</li>
</ul>
<p><strong>m</strong> : to switch from one mode to an other</p>
<p><strong>i</strong> : to return to init state</p>
<div class="section" id="image-overlay">
<h6>Image overlay<a class="headerlink" href="#image-overlay" title="Permalink to this headline">¶</a></h6>
<p>It is useful while editing a layout to have an overlay of an image in
order to help placing points. The image overlay can either be an url or
a filename. In that case the file is stored in</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">()</span>
<span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;fileoverlay&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;http://images.wikia.com/theoffice/images/9/9e/Layout.jpg&#39;</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;overlay&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
<span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;scaled&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;ticksoff&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">False</span>
<span class="n">L</span><span class="o">.</span><span class="n">display</span><span class="p">[</span><span class="s">&#39;inverse&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">True</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">L</span><span class="o">.</span><span class="n">showGs</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2aab2c105c50&gt;,
 &lt;matplotlib.axes.AxesSubplot at 0x2aab2c128d90&gt;)
</pre></div>
</div>
</div>
<div class="section" id="scaling-the-figure-overlay">
<h6>Scaling the figure overlay<a class="headerlink" href="#scaling-the-figure-overlay" title="Permalink to this headline">¶</a></h6>
<p>Before going further it is necessary :</p>
<ul class="simple">
<li>to place the global origin</li>
<li>to precise the vertical and horizontal scale of the image</li>
</ul>
<p>This is done by the following commands :</p>
<ul class="simple">
<li>&#8216;i&#8217; : back to init state</li>
<li>&#8216;m&#8217; : goes to CP state</li>
<li>&#8216;o&#8217; : define the origin</li>
<li>&#8216;left click&#8217; on the point of the figure chasen as the origin</li>
<li>&#8216;left click&#8217; on a point at a known distance from the origin along x
axis. Fill the dialog box with the actual distance (expressed in
meters) between the two points.</li>
<li>&#8216;left click&#8217; on a point at a known distance from the origin along y
axis. Fill the dialog box with the actual distance (expressed in
meters) between the two points.</li>
</ul>
<p>In that sequence of operation it is useful to rescale the figure with
&#8216;r&#8217;.</p>
<p>At that stage, it is possible to start creating points</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;b&#39;  : selct a segment
&#39;l&#39;  : select activelayer
&#39;i&#39;  : back to init state
&#39;e&#39;  : edit segment
&#39;t&#39;  : translate  structure
&#39;h&#39;  : add subsegment
&#39;d&#39;  : delete subsegment
&#39;r&#39;  : refresh
&#39;o&#39;  : toggle overlay
&#39;m&#39;  : toggle mode (point or segment)
&#39;z&#39;  : change display parameters
&#39;q&#39;  : quit interactive mode
&#39;x&#39;  : save .str2 file
&#39;w&#39;  : display all layers
</pre></div>
</div>
</div>
<div class="section" id="vizualisation-of-the-layout">
<h6>Vizualisation of the layout<a class="headerlink" href="#vizualisation-of-the-layout" title="Permalink to this headline">¶</a></h6>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="s">&#39;TA-Office.ini&#39;</span><span class="p">)</span>
<span class="n">L</span><span class="o">.</span><span class="n">dumpr</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">graph</span><span class="o">=</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">font_size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="n">node_size</span><span class="o">=</span><span class="mi">220</span><span class="p">,</span><span class="n">node_color</span><span class="o">=</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;off&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Each node of <img class="math" src="../_images/math/9d358e50c5697373ad7cc566b95dfe19d68e9d20.png" alt="\mathcal{G}_s"/> with a negative index is a point.</p>
<p>Each node of <img class="math" src="../_images/math/9d358e50c5697373ad7cc566b95dfe19d68e9d20.png" alt="\mathcal{G}_s"/> with a positive index corresponds to
a segment (wall,door,window,...).</p>
<p>The segment name is the key of the <strong>slab</strong> dictionnary.</p>
<p><a class="reference external" href="./Multisubsegments.ipynb">Multi Subsegments</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="slabs-and-materials">
<h3><a class="toc-backref" href="#id12">2.1.3&nbsp;&nbsp;&nbsp;Slabs and Materials</a><a class="headerlink" href="#slabs-and-materials" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre>%matplotlib inline
</pre></div>
</div>
<p>A slab is a set ol several layers of materials with specified thickness.
Slabs are used to describe properties of the different constitutive
elements of a building such as wall, windows ,...</p>
<p>In practice when describing a specific building, it is necessary to
specify a set of different slabs with different characteristics.</p>
<p>The structure which gathers this set is <tt class="docutils literal"><span class="pre">SlabDB</span></tt>. If no file argument
is given, this structure is initialized with the default file:
<a class="reference external" href="https://github.com/pylayers/pylayers/blob/master/data/ini/slabDB.ini">slabDB.ini</a></p>
<p>This section demonstrates some features of the <tt class="docutils literal"><span class="pre">pylayers.antprop.slab</span></tt>
module.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pylayers.antprop.slab</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>The Class <tt class="docutils literal"><span class="pre">SlabDB</span></tt> contains a dictionnary of all available Slabs. This
information is read in the file <tt class="docutils literal"><span class="pre">slabDB.ini</span></tt> of the current project
pointed by environment variable <tt class="docutils literal"><span class="pre">$BASENAME</span></tt></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span> <span class="o">=</span> <span class="n">SlabDB</span><span class="p">()</span>
</pre></div>
</div>
<p>A SlabDB is a dictionnary, the keys are for the current file are shown
below</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;WINDOW_GLASS&#39;</span><span class="p">,</span>
 <span class="s">&#39;PLASTERBOARD_7CM&#39;</span><span class="p">,</span>
 <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
 <span class="s">&#39;AIR&#39;</span><span class="p">,</span>
 <span class="s">&#39;WINDOW&#39;</span><span class="p">,</span>
 <span class="s">&#39;METALIC&#39;</span><span class="p">,</span>
 <span class="s">&#39;PLASTERBOARD_14CM&#39;</span><span class="p">,</span>
 <span class="s">&#39;DOOR&#39;</span><span class="p">,</span>
 <span class="s">&#39;FLOOR&#39;</span><span class="p">,</span>
 <span class="s">&#39;METAL&#39;</span><span class="p">,</span>
 <span class="s">&#39;PARTITION&#39;</span><span class="p">,</span>
 <span class="s">&#39;CONCRETE_20CM3D&#39;</span><span class="p">,</span>
 <span class="s">&#39;PLASTERBOARD_10CM&#39;</span><span class="p">,</span>
 <span class="s">&#39;CEIL&#39;</span><span class="p">,</span>
 <span class="s">&#39;CONCRETE_6CM3D&#39;</span><span class="p">,</span>
 <span class="s">&#39;CONCRETE_15CM3D&#39;</span><span class="p">,</span>
 <span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">,</span>
 <span class="s">&#39;WALLS&#39;</span><span class="p">,</span>
 <span class="s">&#39;WOOD&#39;</span><span class="p">,</span>
 <span class="s">&#39;CONCRETE_7CM3D&#39;</span><span class="p">,</span>
 <span class="s">&#39;PILLAR&#39;</span><span class="p">,</span>
 <span class="s">&#39;ABSORBENT&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="defining-a-new-slab-and-a-new-material">
<h4><a class="toc-backref" href="#id13">2.1.3.1&nbsp;&nbsp;&nbsp;Defining a new Slab and a new Material</a><a class="headerlink" href="#defining-a-new-slab-and-a-new-material" title="Permalink to this headline">¶</a></h4>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;slab2&#39;</span><span class="p">,[</span><span class="s">&#39;STONE&#39;</span><span class="p">],[</span><span class="mf">0.15</span><span class="p">])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="o">.</span><span class="n">mat</span><span class="p">[</span><span class="s">&#39;STONE&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&#39;epr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">8.69999980927</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
 <span class="s">&#39;index&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
 <span class="s">&#39;mur&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
 <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;STONE&#39;</span><span class="p">,</span>
 <span class="s">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;slab2&#39;</span><span class="p">][</span><span class="s">&#39;lmatname&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;STONE&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;slab2&#39;</span><span class="p">][</span><span class="s">&#39;lthick&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mf">0.15</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fGHz</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;slab2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;slab2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pcolor</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_17_0.png" src="./SlabsMaterials_files/SlabsMaterials_17_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">A</span><span class="o">=</span><span class="n">S</span><span class="p">[</span><span class="s">&#39;slab2&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>As any PyLayers object there is an help function for remembering which
methods are implemented in the class.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">A</span><span class="o">.</span><span class="n">help</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>clear: D.clear() -&gt; None.  Remove all items from D.
conv:  build lmat and thick
copy: D.copy() -&gt; a shallow copy of D
editgui:  edit a Slab in the DB
ev:  evaluation of the Slab
excess_grdelay:  calculate transmission excess delay in ns
filter:  filtering waveform
fromkeys: dict.fromkeys(S[,v]) -&gt; New dict with keys from S and values equal to v.
get: D.get(k[,d]) -&gt; D[k] if k in D, else d.  d defaults to None.
has_key: D.has_key(k) -&gt; True if D has a key k, else False
help:  generic help
info:  display Slab Info
items: D.items() -&gt; list of D&#39;s (key, value) pairs, as 2-tuples
iteritems: D.iteritems() -&gt; an iterator over the (key, value) items of D
iterkeys: D.iterkeys() -&gt; an iterator over the keys of D
itervalues: D.itervalues() -&gt; an iterator over the values of D
keys: D.keys() -&gt; list of D&#39;s keys
loss0:  calculate loss for theta=0 at frequency (fGHz)
losst:  Calculate loss w.r.t angle and frequency
pcolor:  display of R &amp; T coefficients wrt frequency an angle
plotwrt:  plot R &amp; T coefficients with respect to angle or frequency
pop: D.pop(k[,d]) -&gt; v, remove specified key and return the corresponding value.
popitem: D.popitem() -&gt; (k, v), remove and return some (key, value) pair as a
setdefault: D.setdefault(k[,d]) -&gt; D.get(k,d), also set D[k]=d if k not in D
show:  show slab Reflection and Transmission coefficient
tocolor:   convert slab properrties into a color
update: D.update([E, ]**F) -&gt; None.  Update D from dict/iterable E and F.
values: D.values() -&gt; list of D&#39;s values
viewitems: D.viewitems() -&gt; a set-like object providing a view on D&#39;s items
viewkeys: D.viewkeys() -&gt; a set-like object providing a view on D&#39;s keys
viewvalues: D.viewvalues() -&gt; an object providing a view on D&#39;s values
</pre></div>
</div>
</div>
<div class="section" id="information-necessary-to-define-a-slab">
<h4><a class="toc-backref" href="#id14">2.1.3.2&nbsp;&nbsp;&nbsp;Information necessary to define a Slab</a><a class="headerlink" href="#information-necessary-to-define-a-slab" title="Permalink to this headline">¶</a></h4>
<p>Each slab contains informations about its constitutive materials
electromagnetic properties.</p>
<p>Below an example for a simple slab, constituted with a single material
slab. The slab &#8216;WOOD&#8217; is a layer of 4cm &#8216;WOOD&#8217; material.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">][</span><span class="s">&#39;lmatname&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>thickness is expressed in meters</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">][</span><span class="s">&#39;lthick&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mf">0.04</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">][</span><span class="s">&#39;color&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;maroon&#39;</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">][</span><span class="s">&#39;linewidth&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2</span>
</pre></div>
</div>
<p>Multi layers Slab, using different stacks of materials can be easily
defined using the two lists <strong>lmatname</strong> and <strong>lthick</strong>.</p>
<blockquote>
<div>Notice the adopted convention naming lists starting with letter &#8216;l&#8217;
and dictionnaries starting with letter &#8216;d&#8217;</div></blockquote>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">][</span><span class="s">&#39;lmatname&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;GLASS&#39;</span><span class="p">,</span> <span class="s">&#39;AIR&#39;</span><span class="p">,</span> <span class="s">&#39;GLASS&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">][</span><span class="s">&#39;lthick&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">]</span>
</pre></div>
</div>
<p>For each constitutive material of a slab, their electromagnetic
properties can be obtained as:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">][</span><span class="s">&#39;lmat&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[{</span><span class="s">&#39;epr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">3.79999995232</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;index&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s">&#39;mur&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;GLASS&#39;</span><span class="p">,</span>
  <span class="s">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
  <span class="s">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;epr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;index&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">&#39;mur&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;AIR&#39;</span><span class="p">,</span>
  <span class="s">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
  <span class="s">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;epr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">3.79999995232</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;index&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="s">&#39;mur&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mi">0j</span><span class="p">),</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;GLASS&#39;</span><span class="p">,</span>
  <span class="s">&#39;roughness&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
  <span class="s">&#39;sigma&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluation-of-a-slab">
<h4><a class="toc-backref" href="#id15">2.1.3.3&nbsp;&nbsp;&nbsp;Evaluation of a Slab</a><a class="headerlink" href="#evaluation-of-a-slab" title="Permalink to this headline">¶</a></h4>
<p>Each Slab can be evaluated to obtain the Transmission and Reflexion
coefficients for</p>
<ul class="simple">
<li>a given frequency range</li>
<li>a given incidence angle range (<img class="math" src="../_images/math/c8ecea85ef2986cea055fbac1cc3ee95d1ca2537.png" alt="0\le\theta&lt;\frac{\pi}{2}"/>)</li>
</ul>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sR</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">R</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Here, slab is evaluted for&#39;</span><span class="p">,</span><span class="n">sR</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;frequency(ies)&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">,</span><span class="n">sR</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&#39;angle(s)</span><span class="se">\n</span><span class="s">&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Here, slab is evaluted for 200 frequency(ies) and 158 angle(s)
</pre></div>
</div>
</div>
<div class="section" id="transmission-and-reflexion-coefficients">
<h4><a class="toc-backref" href="#id16">2.1.3.4&nbsp;&nbsp;&nbsp;Transmission and Reflexion coefficients</a><a class="headerlink" href="#transmission-and-reflexion-coefficients" title="Permalink to this headline">¶</a></h4>
<p>Reflexion and transmission coefficient are computed for the given
frequency range and theta range</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">ifreq</span><span class="o">=</span><span class="mi">1</span>
<span class="n">ithet</span><span class="o">=</span><span class="mi">10</span>

<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Reflection coefficient @&#39;</span><span class="p">,</span><span class="n">fGHz</span><span class="p">[</span><span class="n">ifreq</span><span class="p">],</span><span class="s">&#39;GHz and theta=&#39;</span><span class="p">,</span><span class="n">theta</span><span class="p">[</span><span class="n">ithet</span><span class="p">],</span><span class="s">&#39;:</span><span class="se">\n\n</span><span class="s"> R=&#39;</span><span class="p">,</span><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">Transmission coefficient @&#39;</span><span class="p">,</span><span class="n">fGHz</span><span class="p">[</span><span class="n">ifreq</span><span class="p">],</span><span class="s">&#39;GHz and theta=&#39;</span><span class="p">,</span><span class="n">theta</span><span class="p">[</span><span class="n">ithet</span><span class="p">],</span><span class="s">&#39;:</span><span class="se">\n\n</span><span class="s"> T=&#39;</span><span class="p">,</span><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Reflection coefficient @ 3.01 GHz and theta= 0.1 :

 R= [[-0.39396205-0.17289585j  0.00000000+0.j        ]
 [ 0.00000000+0.j          0.39396205+0.17289585j]]

Transmission coefficient @ 3.01 GHz and theta= 0.1 :

 T= [[-0.17594898-0.86927604j -0.00000000+0.j        ]
 [-0.00000000+0.j         -0.17594898-0.86927604j]]
</pre></div>
</div>
<div class="section" id="ploting-reflection-and-transmission-coefficients">
<h5>Ploting Reflection and Transmission Coefficients<a class="headerlink" href="#ploting-reflection-and-transmission-coefficients" title="Permalink to this headline">¶</a></h5>
<p>The method <tt class="docutils literal"><span class="pre">plotwrt</span></tt> can plot the different calculated coefficients
with respect to angle or frequency.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">][</span><span class="s">&#39;lthick&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.02</span><span class="p">]</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">()</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">()</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_44_0.png" src="./SlabsMaterials_files/SlabsMaterials_44_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">][</span><span class="s">&#39;lthick&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.006</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.006</span><span class="p">]</span>
<span class="c">#S[&#39;3D_WINDOW_GLASS&#39;][&#39;lmatname&#39;]=[&#39;GLASS&#39;,&#39;AIR&#39;,&#39;GLASS&#39;]</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="s">&#39;3D_WINDOW_GLASS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">polar</span><span class="o">=</span><span class="s">&#39;o&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_46_0.png" src="./SlabsMaterials_files/SlabsMaterials_46_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;R&#39;</span><span class="p">,</span><span class="n">polar</span><span class="o">=</span><span class="s">&#39;p&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_47_0.png" src="./SlabsMaterials_files/SlabsMaterials_47_0.png" />
<p>plot with respect to angle</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="n">fGHz</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">2.4</span><span class="p">])</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;R&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;matplotlib.figure.Figure at 0x2ac871853490&gt;
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_49_1.png" src="./SlabsMaterials_files/SlabsMaterials_49_1.png" />
<p>wrt to angle and frequency</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">fGHz</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">5.2</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">S</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pcolor</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_51_0.png" src="./SlabsMaterials_files/SlabsMaterials_51_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">sl</span> <span class="o">=</span> <span class="n">SlabDB</span><span class="p">(</span><span class="s">&#39;matDB.ini&#39;</span><span class="p">,</span><span class="s">&#39;slabDB.ini&#39;</span><span class="p">)</span>
<span class="n">mat</span>   <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">mat</span>
<span class="n">lmat</span>  <span class="o">=</span> <span class="p">[</span><span class="n">mat</span><span class="p">[</span><span class="s">&#39;AIR&#39;</span><span class="p">],</span><span class="n">mat</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">]]</span>
<span class="n">II</span>    <span class="o">=</span> <span class="n">MatInterface</span><span class="p">(</span><span class="n">lmat</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">II</span><span class="o">.</span><span class="n">RT</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">II</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="n">kv</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">air</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s">&#39;AIR&#39;</span><span class="p">]</span>
<span class="n">brick</span>  <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s">&#39;BRICK&#39;</span><span class="p">]</span>
<span class="n">II</span>  <span class="o">=</span> <span class="n">MatInterface</span><span class="p">([</span><span class="n">air</span><span class="p">,</span><span class="n">brick</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">II</span><span class="o">.</span><span class="n">RT</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">II</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">var</span><span class="o">=</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;m&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_52_0.png" src="./SlabsMaterials_files/SlabsMaterials_52_0.png" />
<img alt="./SlabsMaterials_files/SlabsMaterials_52_1.png" src="./SlabsMaterials_files/SlabsMaterials_52_1.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="c">## Adding new materials</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">sl</span> <span class="o">=</span> <span class="n">SlabDB</span><span class="p">(</span><span class="s">&#39;matDB.ini&#39;</span><span class="p">,</span><span class="s">&#39;slabDB.ini&#39;</span><span class="p">)</span>
<span class="n">sl</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;AIR2&#39;</span><span class="p">,</span><span class="n">cval</span><span class="o">=</span><span class="mf">1.00000001</span><span class="o">+</span><span class="mi">0j</span><span class="p">,</span><span class="n">sigma</span><span class="o">=</span><span class="mf">0.00</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="s">&#39;epsr&#39;</span><span class="p">)</span>

<span class="n">sl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">,</span><span class="n">lmatname</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;AIR2&#39;</span><span class="p">,</span><span class="s">&#39;AIR2&#39;</span><span class="p">],</span><span class="n">lthick</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span>
<span class="n">sl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">,</span><span class="n">lmatname</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;AIR2&#39;</span><span class="p">,</span><span class="s">&#39;AIR2&#39;</span><span class="p">],</span><span class="n">lthick</span><span class="o">=</span><span class="p">[</span><span class="mf">0.10</span><span class="p">,</span><span class="mf">0.10</span><span class="p">])</span>
<span class="n">sl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">,</span><span class="n">lmatname</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;AIR2&#39;</span><span class="p">,</span><span class="s">&#39;AIR2&#39;</span><span class="p">],</span><span class="n">lthick</span><span class="o">=</span><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.15</span><span class="p">])</span>
<span class="n">fGHz</span><span class="o">=</span><span class="mi">4</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c">#figure(figsize=(8,8))</span>
<span class="c"># These Tessereau page 50</span>

<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># by default var=&#39;a&#39; and kv = 0</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;5cm&#39;</span><span class="p">])</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;10cm&#39;</span><span class="p">],</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashed&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;15cm&#39;</span><span class="p">],</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashdot&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_54_0.png" src="./SlabsMaterials_files/SlabsMaterials_54_0.png" />
</div>
</div>
<div class="section" id="evaluation-without-phase-compensation">
<h4><a class="toc-backref" href="#id17">2.1.3.5&nbsp;&nbsp;&nbsp;Evaluation without phase compensation</a><a class="headerlink" href="#evaluation-without-phase-compensation" title="Permalink to this headline">¶</a></h4>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">theta</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="c">#print ax</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># by default var=&#39;a&#39; and kv = 0</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashdot&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashed&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashdot&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_56_0.png" src="./SlabsMaterials_files/SlabsMaterials_56_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pylayers.signal.bsignal</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">S</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span>
<span class="n">f</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">fGHz</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">T</span><span class="p">[:,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">F</span><span class="o">=</span><span class="n">FUsignal</span><span class="p">(</span><span class="n">f</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">=</span><span class="n">F</span><span class="o">.</span><span class="n">ift</span><span class="p">(</span><span class="n">ffts</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">g</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="s">&#39;v&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2ac86d628c50&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x2ac86d6365d0&gt;]], dtype=object))
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_60_1.png" src="./SlabsMaterials_files/SlabsMaterials_60_1.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="n">compensate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-5cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">)</span>
<span class="c">#print ax</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-10cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashed&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;AIR-50cm&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">coeff</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ru&#39;</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;dashdot&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_61_0.png" src="./SlabsMaterials_files/SlabsMaterials_61_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">sl</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ConcreteJc&#39;</span><span class="p">,</span><span class="n">cval</span><span class="o">=</span><span class="mf">3.5</span><span class="p">,</span><span class="n">alpha_cmm1</span><span class="o">=</span><span class="mf">1.9</span><span class="p">,</span><span class="n">fGHz</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="s">&#39;THz&#39;</span><span class="p">)</span>
<span class="n">sl</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;GlassJc&#39;</span><span class="p">,</span><span class="n">cval</span><span class="o">=</span><span class="mf">2.55</span><span class="p">,</span><span class="n">alpha_cmm1</span><span class="o">=</span><span class="mf">2.4</span><span class="p">,</span><span class="n">fGHz</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="s">&#39;THz&#39;</span><span class="p">)</span>
<span class="n">sl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;ConcreteJc&#39;</span><span class="p">,[</span><span class="s">&#39;ConcreteJc&#39;</span><span class="p">],[</span><span class="mf">0.049</span><span class="p">])</span>

<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;ConcreteJc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;ConcreteJc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_62_0.png" src="./SlabsMaterials_files/SlabsMaterials_62_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">fGHz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">sl</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">,[</span><span class="s">&#39;GlassJc&#39;</span><span class="p">,</span><span class="s">&#39;AIR&#39;</span><span class="p">,</span><span class="s">&#39;GlassJc&#39;</span><span class="p">],[</span><span class="mf">0.0029</span><span class="p">,</span><span class="mf">0.0102</span><span class="p">,</span><span class="mf">0.0029</span><span class="p">])</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">fGHz</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">pcolor</span><span class="p">(</span><span class="n">dB</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_63_0.png" src="./SlabsMaterials_files/SlabsMaterials_63_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;matplotlib.figure.Figure at 0x2ac86cdfdd10&gt;
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_64_1.png" src="./SlabsMaterials_files/SlabsMaterials_64_1.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">freq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ev</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">sl</span><span class="p">[</span><span class="s">&#39;DoubleGlass&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plotwrt</span><span class="p">(</span><span class="s">&#39;f&#39;</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>  <span class="c"># @20</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./SlabsMaterials_files/SlabsMaterials_65_0.png" src="./SlabsMaterials_files/SlabsMaterials_65_0.png" />
</div>
<div class="section" id="references">
<h4><a class="toc-backref" href="#id18">2.1.3.6&nbsp;&nbsp;&nbsp;References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h4>
<p>[1]. <a class="reference external" href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&amp;arnumber=5505315&amp;queryText%3DReflection+ant+Transmission+Properties+of+Building+Materials+in+D-Band+for+Modeling+Future+mm-Wave+Communication+Systems.QT.+Antennas+and+Propagation">Jacob, M. ; Kurner, T. ; Geise, R. ; Piesiewicz, R. &#8220;Reflection
ant Transmission Properties of Building Materials in D-Band for Modeling
Future mm-Wave Communication Systems&#8221; Antennas and Propagation (EuCAP),
2010 Proceedings of the Fourth European Conference
on</a></p>
<p>[2]. <a class="reference external" href="https://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CCwQFjAA&amp;url=http%3A%2F%2Fwww-ece.rice.edu%2F~daniel%2Fpapers%2FnormanElecLett.pdf&amp;ei=Tr_eUe6EG-OM0AWA0IAw&amp;usg=AFQjCNHzt9H3RkLAtws51E9EpEgyqh-6LA&amp;sig2=QLZlhoTJtiuHAW5Zzg_xOw&amp;bvm=bv.48705608,d.d2k">R.Piesiewicz &#8216;Terahertz characterization of building materials&#8217;
Electronics .Letters Jan 2005 Vol 41
N18</a></p>
</div>
</div>
<div class="section" id="effect-of-modyfiying-the-nature-of-sub-segments">
<h3><a class="toc-backref" href="#id19">2.1.4&nbsp;&nbsp;&nbsp;Effect of Modyfiying the Nature of Sub-Segments</a><a class="headerlink" href="#effect-of-modyfiying-the-nature-of-sub-segments" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre>from pylayers.simul.link import *
from pylayers.antprop.rays import *
from pylayers.gis.layout import *
from pylayers.antprop.signature import *
import pylayers.signal.bsignal as bs
import pylayers.signal.waveform as wvf
from pylayers.simul.simulem import *
import matplotlib.pyplot as plt
%matplotlib inline
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>WARNING:traits.has_traits:DEPRECATED: traits.has_traits.wrapped_class, &#39;the &#39;implements&#39; class advisor has been deprecated. Use the &#39;provides&#39; class decorator.
</pre></div>
</div>
<p>This section presents a simple Ray Tracing simulation with different
material properties of a subsegment separating 2 rooms.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="s">&#39;defstr3.ini&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">L</span><span class="o">.</span><span class="n">showG</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">,</span><span class="n">subseg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_3_0.png" src="./Multisubsegments_files/Multisubsegments_3_0.png" />
<p>The studied configuration is composed of a simple 2 rooms building
separated by a subsegment which has a multi subsegment attribute. The
attribute of the subsegment can be changed with the method
<tt class="docutils literal"><span class="pre">`chgmss</span></tt> &lt;<a class="reference external" href="http://pylayers.github.io/pylayers/modules/generated/pylayers.gis.layout.Layout.chgmss.html">http://pylayers.github.io/pylayers/modules/generated/pylayers.gis.layout.Layout.chgmss.html</a>&gt;`__
(change multisubsegment)</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">chgmss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ss_name</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">,</span><span class="s">&#39;AIR&#39;</span><span class="p">,</span><span class="s">&#39;WOOD&#39;</span><span class="p">],</span><span class="n">ss_z</span> <span class="o">=</span><span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">2.7</span><span class="p">),(</span><span class="mf">2.7</span><span class="p">,</span><span class="mf">2.8</span><span class="p">),(</span><span class="mf">2.8</span><span class="p">,</span><span class="mi">3</span><span class="p">)],</span><span class="n">ss_offset</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>As the Layout structure has been modified it is required to rebuild the
structure.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="n">L</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>structure saved in  defstr3.str2
structure saved in  defstr3.ini
</pre></div>
</div>
<p>The <img class="math" src="../_images/math/9d358e50c5697373ad7cc566b95dfe19d68e9d20.png" alt="\mathcal{G}_s"/> graph dictionnary has the following structure</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">node</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="o">-</span><span class="mi">8</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">7</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">6</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">5</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">4</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">3</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">2</span><span class="p">:</span> <span class="p">{},</span>
 <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="p">{},</span>
 <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;PARTITION&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.999982</span>  <span class="p">,</span> <span class="o">-</span><span class="mf">0.00599989</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;ss_name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">,</span> <span class="s">&#39;AIR&#39;</span><span class="p">,</span> <span class="s">&#39;WOOD&#39;</span><span class="p">],</span>
  <span class="s">&#39;ss_offset&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;ss_z&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.7</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.7</span><span class="p">,</span> <span class="mf">2.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.8</span><span class="p">,</span> <span class="mi">3</span><span class="p">)],</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.99997778</span><span class="p">,</span>  <span class="mf">0.00666652</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.99997775</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00667097</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">4</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.99997888</span><span class="p">,</span>  <span class="mf">0.00649986</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">5</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.00619988</span><span class="p">,</span>  <span class="mf">0.99998078</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">6</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.00639987</span><span class="p">,</span>  <span class="mf">0.99997952</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">7</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.99997887</span><span class="p">,</span>  <span class="mf">0.00650149</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">8</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span> <span class="mf">0.00639987</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.99997952</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)},</span>
 <span class="mi">9</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;connect&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span>
  <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;WALL&#39;</span><span class="p">,</span>
  <span class="s">&#39;ncycles&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
  <span class="s">&#39;norm&#39;</span><span class="p">:</span> <span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.00639987</span><span class="p">,</span>  <span class="mf">0.99997952</span><span class="p">,</span>  <span class="mf">0.</span>        <span class="p">]),</span>
  <span class="s">&#39;offset&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s">&#39;transition&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)}}</span>
</pre></div>
</div>
<p>We define now two points which are the termination of a radio link.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">tx</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">759</span><span class="p">,</span><span class="mi">1114</span><span class="p">,</span><span class="mf">1.0</span><span class="p">])</span>
<span class="n">rx</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">767</span><span class="p">,</span><span class="mi">1114</span><span class="p">,</span><span class="mf">1.5</span><span class="p">])</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">L</span><span class="o">.</span><span class="n">chgmss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ss_name</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;WOOD&#39;</span><span class="p">,</span><span class="s">&#39;AIR&#39;</span><span class="p">,</span><span class="s">&#39;WOOD&#39;</span><span class="p">],</span><span class="n">ss_z</span> <span class="o">=</span><span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">2.7</span><span class="p">),(</span><span class="mf">2.7</span><span class="p">,</span><span class="mf">2.8</span><span class="p">),(</span><span class="mf">2.8</span><span class="p">,</span><span class="mi">3</span><span class="p">)],</span><span class="n">ss_offset</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">L</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">Lk</span> <span class="o">=</span> <span class="n">DLink</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="n">L</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">Aa</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">),</span><span class="n">Ab</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>structure saved in  defstr3.str2
structure saved in  defstr3.ini
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">Lk</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>filename: Links_0_defstr3.ini.h5
Link Parameters :
------- --------
Layout : defstr3.ini

Node a
------
position : [  7.59000000e+02   1.11400000e+03   1.00000000e+00]
Antenna : Omni
Rotation matrice :
 [[ 1.  0.  0.]
 [ 0.  1.  0.]
 [ 0.  0.  1.]]

Node b
------
position : [  767.   1114.      1.5]
Antenna : Omni
Rotation matrice :
 [[ 1.  0.  0.]
 [ 0.  1.  0.]
 [ 0.  0.  1.]]

Link evaluation information :
-----------------------------
distance :  8.016 m
delay : 26.719 ns
fmin (fGHz) : 2.0
fmax (fGHz) : 11.0
fstep (fGHz) : 0.05
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">Lk</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_14_0.png" src="./Multisubsegments_files/Multisubsegments_14_0.png" />
<p>On the figure above, we can see the Tx and Rx each placed in a different
room appart from a wall with a subsegement placed in the middle. Then
for evaluating the radio link, simply type:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">ak</span><span class="p">,</span><span class="n">tauk</span><span class="o">=</span><span class="n">Lk</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Signatures&#39;&gt; from 2_1_3 saved
Rays&#39;&gt; from 3_0_1 saved
Ctilde&#39;&gt; from 0_1_0 saved
Tchannel&#39;&gt; from 0_1_0_0_0_1_1 saved
</pre></div>
</div>
<p>At that point the channel has been evaluated and all the data stored in
an <tt class="docutils literal"><span class="pre">hdf5</span></tt> file</p>
<div class="section" id="the-different-members-of-the-link-are">
<h4><a class="toc-backref" href="#id20">2.1.4.1&nbsp;&nbsp;&nbsp;The different members of the link are</a><a class="headerlink" href="#the-different-members-of-the-link-are" title="Permalink to this headline">¶</a></h4>
<p>The Signature of the radio channel is in <tt class="docutils literal"><span class="pre">Lk.Si</span></tt>, the 3D rays are in
<tt class="docutils literal"><span class="pre">Lk.R</span></tt>, the propagation channel is in <tt class="docutils literal"><span class="pre">Lk.C</span></tt> and the transmission
channel is in <tt class="docutils literal"><span class="pre">Lk.H</span></tt></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">Lk</span><span class="o">.</span><span class="n">R</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Rays3D
----------
1 / 1 : [0]
2 / 6 : [1 2 3 4 5 6]
3 / 19 : [ 7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25]
4 / 40 : [26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65]
5 / 46 : [ 66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83
  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101
 102 103 104 105 106 107 108 109 110 111]
6 / 28 : [112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129
 130 131 132 133 134 135 136 137 138 139]
-----
ni : 628
nl : 1396
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">Lk</span><span class="o">.</span><span class="n">C</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Ctilde
---------
(140, 181)
Nray : 140
fmin(GHz) : 2.0
fmax(GHz): 11.0
Nfreq : 181
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">Lk</span><span class="o">.</span><span class="n">C</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s">&#39;jet&#39;</span><span class="p">,</span><span class="n">fig</span><span class="o">=</span><span class="n">f</span><span class="p">,</span><span class="n">typ</span><span class="o">=</span><span class="s">&#39;l20&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_22_0.png" src="./Multisubsegments_files/Multisubsegments_22_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">Lk</span><span class="o">.</span><span class="n">H</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>freq :2.0 10.0 161
shape  :(140, 161)
tau :26.7186992365 73.2944728109
dist :8.01560977094 21.9883418433
Friis factor -j c/(4 pi f) has been applied
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">fGHz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">wav</span> <span class="o">=</span> <span class="n">wvf</span><span class="o">.</span><span class="n">Waveform</span><span class="p">(</span><span class="n">fcGHz</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">bandGHz</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">wav</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_24_0.png" src="./Multisubsegments_files/Multisubsegments_24_0.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">cir</span> <span class="o">=</span> <span class="n">Lk</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sf</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">cir</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;v&#39;</span><span class="p">],</span><span class="n">xmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2ba8c1387190&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x2ba90eb75e90&gt;]], dtype=object))
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_26_1.png" src="./Multisubsegments_files/Multisubsegments_26_1.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">layer</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;AIR&#39;</span><span class="p">,</span><span class="s">&#39;AIR&#39;</span><span class="p">,</span><span class="s">&#39;AIR&#39;</span><span class="p">]</span>
<span class="n">L</span><span class="o">.</span><span class="n">chgmss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ss_name</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
<span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;ss_name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">layer</span>
<span class="n">L</span><span class="o">.</span><span class="n">g2npy</span><span class="p">()</span>
<span class="n">L</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">Lk</span> <span class="o">=</span> <span class="n">DLink</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="n">L</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">Aa</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">),</span><span class="n">Ab</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">))</span>
<span class="n">Lk</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cirair</span> <span class="o">=</span> <span class="n">Lk</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sf</span><span class="p">)</span>
<span class="n">cirair</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;v&#39;</span><span class="p">],</span><span class="n">xmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>structure saved in  defstr3.str2
structure saved in  defstr3.ini
Signatures&#39;&gt; from 2_1_3 saved
Rays&#39;&gt; from 3_0_1 saved
Ctilde&#39;&gt; from 0_1_0 saved
Tchannel&#39;&gt; from 0_1_0_0_0_1_1 saved
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2ba90eba8d90&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x2ba90ec64490&gt;]], dtype=object))
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_27_2.png" src="./Multisubsegments_files/Multisubsegments_27_2.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">layer</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;PARTITION&#39;</span><span class="p">,</span><span class="s">&#39;PARTITION&#39;</span><span class="p">,</span><span class="s">&#39;PARTITION&#39;</span><span class="p">]</span>
<span class="n">L</span><span class="o">.</span><span class="n">chgmss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ss_name</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
<span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;ss_name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">layer</span>
<span class="n">L</span><span class="o">.</span><span class="n">g2npy</span><span class="p">()</span>
<span class="n">L</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">Lk</span> <span class="o">=</span> <span class="n">DLink</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="n">L</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">Aa</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">),</span><span class="n">Ab</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">))</span>
<span class="n">Lk</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cirpart</span> <span class="o">=</span> <span class="n">Lk</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sf</span><span class="p">)</span>
<span class="n">cirpart</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;v&#39;</span><span class="p">],</span><span class="n">xmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>structure saved in  defstr3.str2
structure saved in  defstr3.ini
Signatures&#39;&gt; from 2_1_3 saved
Rays&#39;&gt; from 3_0_1 saved
Ctilde&#39;&gt; from 0_1_0 saved
Tchannel&#39;&gt; from 0_1_0_0_0_1_1 saved
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2ba90e973d90&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x2ba90e6d1190&gt;]], dtype=object))
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_28_2.png" src="./Multisubsegments_files/Multisubsegments_28_2.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">layer</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;METAL&#39;</span><span class="p">,</span><span class="s">&#39;METAL&#39;</span><span class="p">,</span><span class="s">&#39;METAL&#39;</span><span class="p">]</span>
<span class="n">L</span><span class="o">.</span><span class="n">chgmss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">ss_name</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
<span class="n">L</span><span class="o">.</span><span class="n">Gs</span><span class="o">.</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;ss_name&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">layer</span>
<span class="n">L</span><span class="o">.</span><span class="n">g2npy</span><span class="p">()</span>
<span class="n">L</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">Lk</span> <span class="o">=</span> <span class="n">DLink</span><span class="p">(</span><span class="n">L</span><span class="o">=</span><span class="n">L</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">tx</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">rx</span><span class="p">,</span><span class="n">Aa</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">),</span><span class="n">Ab</span><span class="o">=</span><span class="n">Antenna</span><span class="p">(</span><span class="s">&#39;Omni&#39;</span><span class="p">))</span>
<span class="n">Lk</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">cirmet</span> <span class="o">=</span> <span class="n">Lk</span><span class="o">.</span><span class="n">H</span><span class="o">.</span><span class="n">applywavB</span><span class="p">(</span><span class="n">wav</span><span class="o">.</span><span class="n">sf</span><span class="p">)</span>
<span class="n">cirmet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;v&#39;</span><span class="p">],</span><span class="n">xmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">xmax</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>structure saved in  defstr3.str2
structure saved in  defstr3.ini
Signatures&#39;&gt; from 2_1_3 saved
Rays&#39;&gt; from 3_0_1 saved
Ctilde&#39;&gt; from 0_1_0 saved
Tchannel&#39;&gt; from 0_1_0_0_0_1_1 saved
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>(&lt;matplotlib.figure.Figure at 0x2ba90e84ccd0&gt;,
 array([[&lt;matplotlib.axes.AxesSubplot object at 0x2ba90f2f6090&gt;]], dtype=object))
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_29_2.png" src="./Multisubsegments_files/Multisubsegments_29_2.png" />
<div class="code python highlight-python"><div class="highlight"><pre><span class="c">#fig2=plt.figure()</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">cirair</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;l20&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">40</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;A simple illustration of shadowing effect&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&#39;air&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">cirpart</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;l20&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;k&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">40</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&#39;wood&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="n">cirmet</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;l20&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span><span class="o">-</span><span class="mi">40</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s">&#39;metal&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;matplotlib.legend.Legend at 0x2ba9102b0d10&gt;
</pre></div>
</div>
<img alt="./Multisubsegments_files/Multisubsegments_30_1.png" src="./Multisubsegments_files/Multisubsegments_30_1.png" />
<img alt="./Multisubsegments_files/Multisubsegments_30_2.png" src="./Multisubsegments_files/Multisubsegments_30_2.png" />
<img alt="./Multisubsegments_files/Multisubsegments_30_3.png" src="./Multisubsegments_files/Multisubsegments_30_3.png" />
<p>We have modified successively the nature of the 3 surfaces in the sub
segment placed in the sepataion partition. The first was AIR, the second
WOOD and the third METAL. As the subsegment is placed on the LOS path
the blockage effect is clearly visible. The chosen antennas were
omnidirectional <tt class="docutils literal"><span class="pre">Antenna('Omni')</span></tt></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="k">def</span> <span class="nf">css_styling</span><span class="p">():</span>
    <span class="n">styles</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;../styles/custom.css&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">HTML</span><span class="p">(</span><span class="n">styles</span><span class="p">)</span>
<span class="n">css_styling</span><span class="p">()</span>
</pre></div>
</div>
<style>
    @font-face {
        font-family: "Computer Modern";
        src: url('http://mirrors.ctan.org/fonts/cm-unicode/fonts/otf/cmunss.otf');
    }
    div.cell{
        width:800px;
        margin-left:16% !important;
        margin-right:auto;
    }
    h1 {
        font-family: Helvetica, serif;
    }
    h4{
        margin-top:12px;
        margin-bottom: 3px;
       }
    div.text_cell_render{
        font-family: Computer Modern, "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;
        line-height: 145%;
        font-size: 130%;
        width:800px;
        margin-left:auto;
        margin-right:auto;
    }
    .CodeMirror{
            font-family: "Source Code Pro", source-code-pro,Consolas, monospace;
    }
    .prompt{
        display: None;
    }
    .text_cell_render h5 {
        font-weight: 300;
        font-size: 22pt;
        color: #4057A1;
        font-style: italic;
        margin-bottom: .5em;
        margin-top: 0.5em;
        display: block;
    }

    .warning{
        color: rgb( 240, 20, 20 )
        }
</style>
<script>
    MathJax.Hub.Config({
                        TeX: {
                           extensions: ["AMSmath.js"]
                           },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
                },
                displayAlign: 'center', // Change this to 'center' to center equations.
                "HTML-CSS": {
                    styles: {'.MathJax_Display': {"margin": 4}}
                }
        });
</script></div>
</div>
<div class="section" id="outdoor">
<h3><a class="toc-backref" href="#id21">2.1.5&nbsp;&nbsp;&nbsp;Outdoor</a><a class="headerlink" href="#outdoor" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="1-GIS/Ezone.html">1. Geographical Information and the Earth Zone class : <tt class="docutils literal"><span class="pre">Ezone</span></tt></a><ul>
<li class="toctree-l2"><a class="reference internal" href="1-GIS/Ezone.html#zooming-in">1.1. Zooming in</a></li>
<li class="toctree-l2"><a class="reference internal" href="1-GIS/Ezone.html#ground-height-profile-extraction">1.2. Ground Height Profile Extraction</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="description-of-antennas">
<h2><a class="toc-backref" href="#id22">2.2&nbsp;&nbsp;&nbsp;Description of Antennas</a><a class="headerlink" href="#description-of-antennas" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="2-AP/Antenna.html">Description of antennas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-AP/Antenna.html#synthesis-of-the-radiation-pattern">Synthesis of the radiation pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-AP/Antenna.html#defining-antenna-gain-from-analytic-formulas">Defining Antenna gain from analytic formulas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/AntennaSSH.html">Scalar Spherical Harmonics</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/AntennaVSH.html">Vector Spherical Harmonics Representation of Antennas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-AP/AntennaVSH.html#display-of-the-radiation-pattern-for-all-frequencies">Display of the radiation pattern for all frequencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/AntennaVSH.html#evaluation-of-vector-spherical-harmonics-coefficients">Evaluation of Vector Spherical Harmonics Coefficients</a></li>
</ul>
</div>
</div>
<div class="section" id="multiwall-motley-keenan-simulation">
<h2><a class="toc-backref" href="#id23">2.3&nbsp;&nbsp;&nbsp;Multiwall Motley-Keenan Simulation</a><a class="headerlink" href="#multiwall-motley-keenan-simulation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="2-AP/Coverage.html">Indoor Coverage with the PyLayers Multi Wall model</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/MultiWall.html">Multi-wall model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-AP/MultiWall.html#defining-a-radio-link">Defining a radio link</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-AP/MultiWall.html#ploting-the-scene">Ploting the scene</a><ul>
<li class="toctree-l3"><a class="reference internal" href="2-AP/MultiWall.html#finding-the-intersection-between-the-direct-path-and-the-walls">Finding the intersection between the &#8220;direct&#8221; path and the walls</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-AP/MultiWall.html#computing-the-multi-wall-model">Computing the Multi-wall model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/MultiWall.html#coverage-class">Coverage class</a></li>
</ul>
</div>
</div>
<div class="section" id="ray-tracing-tool">
<h2><a class="toc-backref" href="#id24">2.4&nbsp;&nbsp;&nbsp;Ray Tracing Tool</a><a class="headerlink" href="#ray-tracing-tool" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="2-AP/Signatures.html">Ray Signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="2-AP/Channel.html">The transmission channel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="2-AP/Channel.html#the-friis-factor">The Friis factor</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-AP/Channel.html#the-tap-method">The tap method</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/LinkSimulation.html">How to do Ray Tracing simulation using DLink</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="handling-agent-mobility">
<h1><a class="toc-backref" href="#id25">3&nbsp;&nbsp;&nbsp;Handling Agent Mobility</a><a class="headerlink" href="#handling-agent-mobility" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/SimulNetConfig.html">Network Simulation Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/SimulNetConfig.html#simulnet-ini">Simulnet.ini</a><ul>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/SimulNetConfig.html#save-section">Save section</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/SimulNetConfig.html#layout-section">Layout section</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/SimulNetConfig.html#network-section">Network section</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/SimulNetConfig.html#mechanics">Mechanics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/SimulNetConfig.html#localization-section">Localization section</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/SimulNetConfig.html#simulation-section">Simulation section</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="wireless-body-area-network-related-classes">
<h1><a class="toc-backref" href="#id26">4&nbsp;&nbsp;&nbsp;Wireless Body Area Network Related Classes</a><a class="headerlink" href="#wireless-body-area-network-related-classes" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/Corser.html">Table Of Content</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Corser.html#cormoran-measurement-campaign">CORMORAN Measurement Campaign</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/Corser.html#motivation-for-creating-a-specific-tool">Motivation for creating a specific tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/Corser.html#prerequisite-installations">Prerequisite Installations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Corser.html#the-corser-class">The <tt class="docutils literal"><span class="pre">CorSer</span></tt> Class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/Corser.html#plot-values">Plot values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="5-SIM/Corser.html#plot-distance">Plot distance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/Corser.html#specify-time-bodytime-parameter">Specify time (<em>bodytime</em> parameter)</a></li>
<li class="toctree-l3"><a class="reference internal" href="5-SIM/Corser.html#display-trajectory-trajectory-parameter">display trajectory (<em>trajectory</em> parameter)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/Corser.html#using-pylayers-ray-tracing-with-corser-data">Using Pylayers Ray-tracing with CorSer data</a></li>
</ul>
</div>
</div>
<div class="section" id="some-simulation-examples">
<h1><a class="toc-backref" href="#id27">5&nbsp;&nbsp;&nbsp;Some Simulation Examples</a><a class="headerlink" href="#some-simulation-examples" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/DLR-WHERE2.html">Example of a trajectory synthesis in the DLR WHERE2 environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/DLR-WHERE2.html#loading-the-layout">Loading the Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/DLR-WHERE2.html#aggregated-cir-along-a-synthetic-trajectory-line-in-the-corridor">Aggregated CIR along a synthetic trajectory (line in the corridor)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/WHERE1-M1.html">Example of an UWB channel Ray Tracing simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/WHERE1-M1.html#adding-coordinates-of-transmiting-and-receiving-points">Adding Coordinates of Transmiting and Receiving points</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/WHERE1-M1.html#signatures-rays-and-propagation-and-transmission-channel">Signatures, rays and propagation and transmission channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/WHERE1-M1.html#calulating-the-propagation-channel">Calulating the Propagation Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/WHERE1-M1.html#applying-a-waveform-to-the-transmission-channel">Applying a waveform to the transmission channel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="5-SIM/Where1M1.html">WHERE1-M1 UWB measurement campaign</a><ul>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Where1M1.html#simulation-creation">Simulation Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Where1M1.html#adding-coordinates-of-transmiting-and-receiving-points">Adding coordinates of transmiting and receiving points</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Where1M1.html#signatures-rays-and-radio-channel">Signatures, Rays and Radio Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="5-SIM/Where1M1.html#apply-waveform">Apply waveform</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="pylayers-tools">
<h1><a class="toc-backref" href="#id28">6&nbsp;&nbsp;&nbsp;PyLayers Tools</a><a class="headerlink" href="#pylayers-tools" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="3-PHY/Bsignal.html">Handling time and frequency domain signals : <tt class="docutils literal"><span class="pre">Bsignal</span></tt> Class</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3-PHY/Bsignal.html#fhsignal-for-in-cir-mode">FHsignal for in CIR mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="3-PHY/Noise.html">Modelisation of the Thermal Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="8-MISC/Cone.html">24. The class Cone</a><ul>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#is-a-point-in-the-cone-belong-point">24.1. Is a point in the cone : belong_point()</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#creating-a-cone-from-2-segments-from2segs">24.2. Creating a Cone from 2 segments <tt class="docutils literal"><span class="pre">from2segs()</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#conditional-graph">24.3. Conditional Graph</a><ul>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Cone.html#benchmark-normalizing-a-vector">24.3.1. Benchmark normalizing a vector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#debug">24.4. Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#geomutil-mirror">24.5. geomutil.mirror</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Cone.html#geometric-probability">24.6. Geometric probability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="8-MISC/Geomutil.html">25. Class Polygon</a><ul>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Geomutil.html#ploting-polygons">25.1. ploting polygons</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Geomutil.html#buildgv">25.2. <tt class="docutils literal"><span class="pre">buildGv()</span></tt></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="8-MISC/Geomutil.html#geomview-classes">26. Geomview classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Geomutil.html#geomvect-class">26.1. GeomVect class</a><ul>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#geombase">26.1.1. geomBase</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#points">26.1.2. points</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#plotting-a-box">26.1.3. plotting a box</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Geomutil.html#utility-functions">26.2. Utility functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#angledir">26.2.1. angledir</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#linet">26.2.2. linet</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#dptseg-p-pt-ph">26.2.3. dptseg(p,pt,ph)</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#displot">26.2.4. displot</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#ptonseg-pta-phe-pt">26.2.5. ptonseg(pta,phe,pt)</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#ptconvex">26.2.6. ptconvex</a></li>
<li class="toctree-l3"><a class="reference internal" href="8-MISC/Geomutil.html#intersect">26.2.7. intersect</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="8-MISC/Geomutil.html#useful-functions">26.3. Useful functions</a></li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="1-GIS/Ezone.html" title="1. Geographical Information and the Earth Zone class : Ezone"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="&lt;no title&gt;"
             >previous</a> |</li>
        <li><a href="../index.html">PyLayers Home </a> |&nbsp;</li>
        <li><a href="#">Documentation </a> |&nbsp;</li>
        <li><a href="../download.html">Download </a> |&nbsp; </li>
        <li><a href="https://github.com/pylayers/">Developer (Github)</a> </li>
 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2015, PyLayers developer team.
      Last updated on mars 06, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34943220-1']);
  _gaq.push(['_setDomainName', 'pylayers.github.io']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })(); 
</script> 
 
  </body>
</html>